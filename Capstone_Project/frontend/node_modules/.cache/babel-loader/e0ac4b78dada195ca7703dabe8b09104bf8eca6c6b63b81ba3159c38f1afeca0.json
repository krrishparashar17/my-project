{"ast":null,"code":"var _jsxFileName = \"C:\\\\codes\\\\Project FSD\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$(),\n  _s8 = $RefreshSig$(),\n  _s9 = $RefreshSig$(),\n  _s0 = $RefreshSig$(),\n  _s1 = $RefreshSig$(),\n  _s10 = $RefreshSig$(),\n  _s11 = $RefreshSig$(),\n  _s12 = $RefreshSig$(),\n  _s13 = $RefreshSig$();\nimport React, { useState, useEffect, createContext, useContext } from 'react';\nimport { BrowserRouter, Routes, Route, Link, useNavigate, Outlet, useLocation, Navigate, useParams } from 'react-router-dom';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst GlobalStyles = () => /*#__PURE__*/_jsxDEV(\"style\", {\n  children: `\n    body {\n      overflow-y: scroll;\n    }\n    \n    .aurora-background {\n      position: fixed;\n      top: 0;\n      left: 0;\n      width: 100%;\n      height: 100vh;\n      z-index: -10;\n      overflow: hidden;\n    }\n    \n    .dark .aurora-background {\n      background: #030712;\n    }\n    \n    .light .aurora-background {\n      background: #f3f4f6;\n    }\n\n    .aurora-background::before,\n    .aurora-background::after {\n      content: '';\n      position: absolute;\n      width: 60vmax;\n      height: 60vmax;\n      border-radius: 50%;\n      filter: blur(120px);\n      animation: aurora 20s linear infinite;\n    }\n    \n    .dark .aurora-background::before {\n      background: radial-gradient(circle, #7c3aed, transparent 40%);\n      top: -30vmax;\n      left: -30vmax;\n      opacity: 0.25;\n    }\n    \n    .dark .aurora-background::after {\n      background: radial-gradient(circle, #2563eb, transparent 40%);\n      bottom: -30vmax;\n      right: -30vmax;\n      animation-delay: 5s;\n      opacity: 0.25;\n    }\n\n    .light .aurora-background::before {\n      background: radial-gradient(circle, #a5b4fc, transparent 40%);\n      top: -30vmax;\n      left: -30vmax;\n      opacity: 0.3;\n    }\n    \n    .light .aurora-background::after {\n      background: radial-gradient(circle, #7dd3fc, transparent 40%);\n      bottom: -30vmax;\n      right: -30vmax;\n      animation-delay: 5s;\n      opacity: 0.3;\n    }\n\n    @keyframes aurora {\n      0% { transform: rotate(0deg) scale(1); }\n      50% { transform: rotate(180deg) scale(1.2); }\n      100% { transform: rotate(360deg) scale(1); }\n    }\n  `\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 16,\n  columnNumber: 3\n}, this);\n_c = GlobalStyles;\nconst ROLES = {\n  Admin: 'Admin',\n  Editor: 'Editor',\n  Viewer: 'Viewer'\n};\n\n// Mock data for Audit Log demonstration\nconst MOCK_AUDIT_LOGS = [{\n  _id: '1',\n  adminUsername: 'admin',\n  targetUsername: 'editor',\n  oldRole: 'Viewer',\n  newRole: 'Editor',\n  timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString() // 2 hours ago\n}, {\n  _id: '2',\n  adminUsername: 'admin',\n  targetUsername: 'newuser',\n  oldRole: 'Editor',\n  newRole: 'Viewer',\n  timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString() // 1 day ago\n}, {\n  _id: '3',\n  adminUsername: 'admin',\n  targetUsername: 'anotheruser',\n  oldRole: 'Viewer',\n  newRole: 'Editor',\n  timestamp: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString() // 3 days ago\n}];\nconst PERMISSIONS = {\n  [ROLES.Admin]: {\n    content: ['create', 'read', 'update_all', 'delete_all'],\n    users: ['read', 'update', 'delete'],\n    auditlog: ['read']\n  },\n  [ROLES.Editor]: {\n    content: ['create', 'read', 'update_own', 'delete_own'],\n    users: [],\n    auditlog: []\n  },\n  [ROLES.Viewer]: {\n    content: ['read'],\n    users: [],\n    auditlog: []\n  }\n};\nconst AuthContext = /*#__PURE__*/createContext(null);\nconst ThemeContext = /*#__PURE__*/createContext(null);\nconst apiClient = axios.create({\n  baseURL: 'http://localhost:5001/api',\n  withCredentials: true\n});\napiClient.interceptors.request.use(config => {\n  const {\n    accessToken\n  } = JSON.parse(localStorage.getItem('auth') || '{}');\n  if (accessToken) {\n    config.headers['Authorization'] = `Bearer ${accessToken}`;\n  }\n  return config;\n}, error => Promise.reject(error));\napiClient.interceptors.response.use(response => response, async error => {\n  var _error$response;\n  const originalRequest = error.config;\n  if (((_error$response = error.response) === null || _error$response === void 0 ? void 0 : _error$response.status) === 401 && !originalRequest._retry) {\n    originalRequest._retry = true;\n    try {\n      const {\n        data\n      } = await apiClient.post('/auth/refresh');\n      const newAccessToken = data.accessToken;\n      let authData = JSON.parse(localStorage.getItem('auth') || '{}');\n      authData.accessToken = newAccessToken;\n      localStorage.setItem('auth', JSON.stringify(authData));\n      originalRequest.headers['Authorization'] = `Bearer ${newAccessToken}`;\n      return apiClient(originalRequest);\n    } catch (refreshError) {\n      localStorage.removeItem('auth');\n      window.location.href = '/login';\n      return Promise.reject(refreshError);\n    }\n  }\n  return Promise.reject(error);\n});\nconst ThemeProvider = ({\n  children\n}) => {\n  _s();\n  const [theme, setTheme] = useState('dark');\n  useEffect(() => {\n    const root = window.document.documentElement;\n    if (theme === 'dark') {\n      root.classList.add('dark');\n      root.classList.remove('light');\n    } else {\n      root.classList.remove('dark');\n      root.classList.add('light');\n    }\n  }, [theme]);\n  const toggleTheme = () => {\n    setTheme(prev => prev === 'light' ? 'dark' : 'light');\n  };\n  return /*#__PURE__*/_jsxDEV(ThemeContext.Provider, {\n    value: {\n      theme,\n      toggleTheme\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 205,\n    columnNumber: 5\n  }, this);\n};\n_s(ThemeProvider, \"D0ekClnfIGVExrH5c3Ka+aWcxxE=\");\n_c2 = ThemeProvider;\nconst useTheme = () => {\n  _s2();\n  return useContext(ThemeContext);\n};\n_s2(useTheme, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst AuthProvider = ({\n  children\n}) => {\n  _s3();\n  const [user, setUser] = useState(null);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    try {\n      const authData = JSON.parse(localStorage.getItem('auth'));\n      if (authData && authData.user) {\n        setUser(authData.user);\n      }\n    } catch (error) {\n      console.error('Failed to parse auth data from localStorage');\n    }\n    setLoading(false);\n  }, []);\n  const login = userData => {\n    const authData = {\n      accessToken: userData.accessToken,\n      user: userData.user\n    };\n    localStorage.setItem('auth', JSON.stringify(authData));\n    setUser(userData.user);\n    return userData.user; // Return user data for navigation\n  };\n  const logout = async () => {\n    try {\n      await apiClient.post('/auth/logout');\n    } catch (error) {\n      console.error('Logout failed', error);\n    }\n    localStorage.removeItem('auth');\n    setUser(null);\n  };\n  const value = {\n    user,\n    login,\n    logout,\n    loading\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: !loading && children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 252,\n    columnNumber: 5\n  }, this);\n};\n_s3(AuthProvider, \"NiO5z6JIqzX62LS5UWDgIqbZYyY=\");\n_c3 = AuthProvider;\nconst useAuth = () => {\n  _s4();\n  return useContext(AuthContext);\n};\n_s4(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst usePermissions = () => {\n  _s5();\n  const {\n    user\n  } = useAuth();\n  const can = (action, subject) => {\n    var _PERMISSIONS$user$rol;\n    if (!user) return false;\n    const [resource, requiredPermission] = action.split(':');\n    const userPermissions = ((_PERMISSIONS$user$rol = PERMISSIONS[user.role]) === null || _PERMISSIONS$user$rol === void 0 ? void 0 : _PERMISSIONS$user$rol[resource]) || [];\n    if (userPermissions.includes(requiredPermission) || userPermissions.includes(`${requiredPermission}_all`)) {\n      return true;\n    }\n    if (userPermissions.includes(`${requiredPermission}_own`)) {\n      if (!subject) {\n        return true;\n      }\n      return subject.authorId === user.id;\n    }\n    return false;\n  };\n  const canRead = (resource = 'content') => can(`${resource}:read`);\n  const canCreate = (resource = 'content') => can(`${resource}:create`);\n  const canUpdate = (subject, resource = 'content') => can(`${resource}:update`, subject);\n  const canDelete = (subject, resource = 'content') => can(`${resource}:delete`, subject);\n  const canManageUsers = () => can('users:read');\n  const canReadAuditLog = () => can('auditlog:read');\n  return {\n    can,\n    canRead,\n    canCreate,\n    canUpdate,\n    canDelete,\n    canManageUsers,\n    canReadAuditLog,\n    userRole: user === null || user === void 0 ? void 0 : user.role,\n    userId: user === null || user === void 0 ? void 0 : user.id\n  };\n};\n_s5(usePermissions, \"9ep4vdl3mBfipxjmc+tQCDhw6Ik=\", false, function () {\n  return [useAuth];\n});\nconst Layout = () => {\n  _s6();\n  const {\n    user,\n    logout\n  } = useAuth();\n  const navigate = useNavigate();\n  const {\n    canManageUsers,\n    canReadAuditLog\n  } = usePermissions();\n  const {\n    theme,\n    toggleTheme\n  } = useTheme();\n  const handleLogout = async () => {\n    await logout();\n    navigate('/login');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen font-sans relative z-10 text-gray-900 dark:text-gray-100\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"aurora-background\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 309,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"bg-white dark:bg-black/10 shadow-lg border-b border-gray-200 dark:border-white/5 dark:backdrop-blur-lg sticky top-0 z-50\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between h-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              className: \"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500\",\n              children: \"RBAC Platform\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 313,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center space-x-4\",\n            children: [/*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              className: \"text-gray-800 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 px-3 py-2 rounded-md text-sm font-medium transition-colors\",\n              children: \"Home\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 15\n            }, this), canManageUsers() && /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/admin/users\",\n              className: \"text-gray-800 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 px-3 py-2 rounded-md text-sm font-medium transition-colors\",\n              children: \"User Panel\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 323,\n              columnNumber: 17\n            }, this), canReadAuditLog() && /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/admin/audit\",\n              className: \"text-gray-800 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 px-3 py-2 rounded-md text-sm font-medium transition-colors\",\n              children: \"Audit Log\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 17\n            }, this), user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-800 dark:text-gray-200 text-sm\",\n                children: [\"Hi, \", user.username, \" (\", user.role, \")\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 334,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: handleLogout,\n                className: \"bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-md hover:from-red-600 hover:to-red-700 transition-all duration-300 transform hover:scale-105\",\n                children: \"Logout\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 335,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n              children: [/*#__PURE__*/_jsxDEV(Link, {\n                to: \"/login\",\n                className: \"text-gray-800 dark:text-gray-200 bg-gray-100 dark:bg-black/20 border border-gray-300 dark:border-white/10 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-black/40 transition-all duration-300\",\n                children: \"Login\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 344,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/register\",\n                className: \"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-md hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105\",\n                children: \"Sign Up\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 350,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: toggleTheme,\n              className: \"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-200 dark:bg-black/20 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-black/30 transition-colors\",\n              \"aria-label\": \"Toggle theme\",\n              children: theme === 'light' ? /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-5 w-5\",\n                viewBox: \"0 0 20 20\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  d: \"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 364,\n                  columnNumber: 120\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 364,\n                columnNumber: 20\n              }, this) : /*#__PURE__*/_jsxDEV(\"svg\", {\n                xmlns: \"http://www.w3.org/2000/svg\",\n                className: \"h-5 w-5\",\n                viewBox: \"0 0 20 20\",\n                fill: \"currentColor\",\n                children: /*#__PURE__*/_jsxDEV(\"path\", {\n                  fillRule: \"evenodd\",\n                  d: \"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm-7.071 0l-.707.707a1 1 0 001.414 1.414l.707-.707a1 1 0 00-1.414-1.414zM10 16a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM3 9a1 1 0 011-1h1a1 1 0 110 2H4a1 1 0 01-1-1zm14 0a1 1 0 011-1h1a1 1 0 110 2h-1a1 1 0 01-1-1zM4.95 15.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707a1 1 0 001.414-1.414zM15.05 4.95l.707-.707a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414z\",\n                  clipRule: \"evenodd\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 365,\n                  columnNumber: 120\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 365,\n                columnNumber: 20\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 311,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 310,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"py-10 relative z-10\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\",\n        children: /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 374,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 373,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 372,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 308,\n    columnNumber: 5\n  }, this);\n};\n_s6(Layout, \"/ZJEx83DbWbhln2x8YSgYigMHqM=\", false, function () {\n  return [useAuth, useNavigate, usePermissions, useTheme];\n});\n_c4 = Layout;\nconst HomePage = () => {\n  _s7();\n  const [content, setContent] = useState([]);\n  const [error, setError] = useState(null);\n  const {\n    canCreate\n  } = usePermissions();\n  const fetchContent = async () => {\n    try {\n      setError(null);\n      const {\n        data\n      } = await apiClient.get('/content');\n      setContent(data);\n    } catch (err) {\n      setError('Failed to fetch content.');\n      console.error(err);\n    }\n  };\n  useEffect(() => {\n    fetchContent();\n  }, []);\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500 text-center\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 402,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-4xl font-bold text-gray-900 dark:text-gray-100\",\n        children: \"Content Feed\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this), canCreate() && /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/create\",\n        className: \"bg-gradient-to-r from-green-500 to-green-600 text-white px-5 py-2.5 rounded-lg shadow-md hover:from-green-600 hover:to-green-700 transition-all duration-300 transform hover:scale-105\",\n        children: \"+ Create New Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 410,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 407,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: content.length > 0 ? content.map(item => /*#__PURE__*/_jsxDEV(ContentItem, {\n        item: item,\n        onDelete: fetchContent\n      }, item._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 420,\n        columnNumber: 11\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-gray-700 dark:text-gray-400 text-center\",\n        children: \"No content yet. Be the first to create a post!\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 422,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 406,\n    columnNumber: 5\n  }, this);\n};\n_s7(HomePage, \"3a8c7mspEVCt9plabnx9Qt2v6BE=\", false, function () {\n  return [usePermissions];\n});\n_c5 = HomePage;\nconst ContentItem = ({\n  item,\n  onDelete\n}) => {\n  _s8();\n  const {\n    canUpdate,\n    canDelete\n  } = usePermissions();\n  const [showConfirm, setShowConfirm] = useState(false);\n  const [deleteError, setDeleteError] = useState(null);\n  const subject = {\n    authorId: item.author._id\n  };\n  const canEdit = canUpdate(subject);\n  const canRemove = canDelete(subject);\n  const requestDelete = () => {\n    setDeleteError(null);\n    setShowConfirm(true);\n  };\n  const cancelDelete = () => {\n    setShowConfirm(false);\n  };\n  const confirmDelete = async () => {\n    try {\n      await apiClient.delete(`/content/${item._id}`);\n      onDelete();\n      setShowConfirm(false);\n    } catch (err) {\n      setDeleteError('Failed to delete post.');\n      console.error(err);\n      setShowConfirm(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white dark:bg-black/10 p-6 rounded-2xl shadow-lg border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg transition-all duration-300 hover:shadow-xl\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-start\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-2\",\n          children: item.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 463,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-700 dark:text-gray-400 text-sm mb-4\",\n          children: [\"By \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-medium text-gray-900 dark:text-gray-200\",\n            children: item.author.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 464,\n            columnNumber: 75\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 464,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 462,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex space-x-2 flex-shrink-0 ml-4\",\n        children: [canEdit && /*#__PURE__*/_jsxDEV(Link, {\n          to: `/edit/${item._id}`,\n          className: \"text-sm bg-gradient-to-r from-yellow-400 to-yellow-500 text-white px-4 py-2 rounded-lg shadow-md hover:from-yellow-500 hover:to-yellow-600 transition-all duration-300 transform hover:scale-105\",\n          title: \"Edit this post\",\n          children: \"Edit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 468,\n          columnNumber: 13\n        }, this), canRemove && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: requestDelete,\n          className: \"text-sm bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-lg shadow-md hover:from-red-600 hover:to-red-700 transition-all duration-300 transform hover:scale-105\",\n          title: \"Delete this post\",\n          children: \"Delete\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 477,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 466,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 461,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-800 dark:text-gray-300 leading-relaxed\",\n      children: item.body\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 487,\n      columnNumber: 7\n    }, this), deleteError && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500 text-sm mt-4 text-center bg-red-100 border border-red-400 p-3 rounded-lg\",\n      children: deleteError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 490,\n      columnNumber: 9\n    }, this), showConfirm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white dark:bg-gray-900 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-gray-200 dark:border-white/10\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-gray-100\",\n          children: \"Are you sure?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 496,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-800 dark:text-gray-300 mb-8 text-center\",\n          children: \"Do you really want to delete this post? This action cannot be undone.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 497,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-around space-x-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: cancelDelete,\n            className: \"w-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-300\",\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: confirmDelete,\n            className: \"w-full bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-lg shadow-md hover:from-red-600 hover:to-red-700 transition-all duration-300 transform hover:scale-105\",\n            children: \"Delete\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 507,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 500,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 495,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 494,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 460,\n    columnNumber: 5\n  }, this);\n};\n_s8(ContentItem, \"hw0QRq+nvIhvpTHBchh/nUZt3Ww=\", false, function () {\n  return [usePermissions];\n});\n_c6 = ContentItem;\nconst AuthFormWrapper = ({\n  title,\n  children\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"max-w-md mx-auto bg-white dark:bg-black/10 p-8 md:p-10 rounded-2xl shadow-2xl border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg\",\n  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n    className: \"text-3xl font-bold text-center mb-8 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500\",\n    children: title\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 523,\n    columnNumber: 5\n  }, this), children]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 522,\n  columnNumber: 3\n}, this);\n_c7 = AuthFormWrapper;\nconst LoginPage = () => {\n  _s9();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(null);\n  const {\n    login\n  } = useAuth();\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(null);\n    try {\n      const {\n        data\n      } = await apiClient.post('/auth/login', {\n        username,\n        password\n      });\n      const user = login(data); // login now returns the user\n\n      // Navigate based on role\n      if (user.role === ROLES.Admin) {\n        navigate('/admin/users');\n      } else {\n        navigate('/');\n      }\n    } catch (err) {\n      var _err$response, _err$response$data;\n      setError(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || 'Invalid username or password.');\n      console.error(err);\n    }\n  };\n  const handleDemoLogin = role => {\n    if (role === 'admin') {\n      setUsername('admin');\n      setPassword('adminpassword');\n    } else if (role === 'editor') {\n      setUsername('editor');\n      setPassword('editorpassword');\n    } else if (role === 'viewer') {\n      setUsername('viewer');\n      setPassword('viewerpassword');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthFormWrapper, {\n    title: \"Welcome Back!\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 text-center mb-4 text-sm\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 572,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-800 dark:text-gray-200 mb-2 font-medium\",\n          htmlFor: \"username\",\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"username\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          className: \"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 575,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 573,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-800 dark:text-gray-200 mb-2 font-medium\",\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 584,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          className: \"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 585,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 583,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2.5 rounded-lg shadow-lg shadow-blue-500/30 dark:shadow-blue-400/20 hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 593,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 571,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-8 text-center\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-sm text-gray-800 dark:text-gray-300 mb-4\",\n        children: \"Or try a demo user:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 602,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-1 sm:grid-cols-3 gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleDemoLogin('admin'),\n          className: \"w-full px-4 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-purple-500 to-indigo-600 shadow-md hover:from-purple-600 hover:to-indigo-700 transition-all duration-300 transform hover:scale-105\",\n          children: \"Admin\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 604,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleDemoLogin('editor'),\n          className: \"w-full px-4 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-blue-500 to-cyan-600 shadow-md hover:from-blue-600 hover:to-cyan-700 transition-all duration-300 transform hover:scale-105\",\n          children: \"Editor\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 611,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"button\",\n          onClick: () => handleDemoLogin('viewer'),\n          className: \"w-full px-4 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-teal-500 to-emerald-600 shadow-md hover:from-teal-600 hover:to-emerald-700 transition-all duration-300 transform hover:scale-105\",\n          children: \"Viewer\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 618,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 603,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 601,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-8 text-center text-sm text-gray-700 dark:text-gray-400\",\n      children: [\"Don't have an account?\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/register\",\n        className: \"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300\",\n        children: \"Sign Up\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 630,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 628,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 570,\n    columnNumber: 5\n  }, this);\n};\n_s9(LoginPage, \"9moAHKcEr28kYMjK2qiny1DsrE4=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c8 = LoginPage;\nconst RegisterPage = () => {\n  _s0();\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [role, setRole] = useState(ROLES.Viewer); // Default to Viewer\n  const [error, setError] = useState(null);\n  const {\n    login\n  } = useAuth();\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(null);\n    try {\n      const {\n        data\n      } = await apiClient.post('/auth/register', {\n        username,\n        password,\n        role\n      });\n      login(data);\n      navigate('/');\n    } catch (err) {\n      var _err$response2, _err$response2$data;\n      setError(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || 'Failed to register. Username might be taken.');\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(AuthFormWrapper, {\n    title: \"Create Your Account\",\n    children: [/*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 text-center mb-4 text-sm\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 662,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-800 dark:text-gray-200 mb-2 font-medium\",\n          htmlFor: \"username\",\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"username\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          className: \"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 663,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-800 dark:text-gray-200 mb-2 font-medium\",\n          htmlFor: \"password\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 674,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          id: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          className: \"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 675,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 673,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-800 dark:text-gray-200 mb-2 font-medium\",\n          htmlFor: \"role\",\n          children: \"Register as\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 684,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"role\",\n          value: role,\n          onChange: e => setRole(e.target.value),\n          className: \"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\",\n          children: [/*#__PURE__*/_jsxDEV(\"option\", {\n            value: ROLES.Viewer,\n            children: \"Viewer\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n            value: ROLES.Editor,\n            children: \"Editor\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 683,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-full bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2.5 rounded-lg shadow-lg shadow-green-500/30 dark:shadow-green-400/20 hover:from-green-600 hover:to-green-700 transition-all duration-300 transform hover:scale-105\",\n        children: \"Register\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 695,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 661,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-6 text-center text-sm text-gray-700 dark:text-gray-400\",\n      children: [\"Already have an account?\", ' ', /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/login\",\n        className: \"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 704,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 702,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 660,\n    columnNumber: 5\n  }, this);\n};\n_s0(RegisterPage, \"Qg3SWAyNBLZGLsG4flssbf5wdmk=\", false, function () {\n  return [useAuth, useNavigate];\n});\n_c9 = RegisterPage;\nconst AdminPage = () => {\n  _s1();\n  const [users, setUsers] = useState([]);\n  const [fetchError, setFetchError] = useState(null);\n  const [updateError, setUpdateError] = useState(null);\n  const [pendingRoles, setPendingRoles] = useState({}); // Track pending changes\n  const {\n    userId\n  } = usePermissions(); // Get current user's ID\n\n  const fetchUsers = async () => {\n    try {\n      setFetchError(null);\n      const {\n        data\n      } = await apiClient.get('/users');\n      setUsers(data);\n    } catch (err) {\n      setFetchError('Failed to fetch users. The backend might not be running.');\n      console.error(err);\n      // In a real app, you might not want to clear users on failed refetch\n    }\n  };\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  // Update local state, don't call API\n  const handleRoleSelect = (selectedUserId, newRole) => {\n    setPendingRoles(prev => ({\n      ...prev,\n      [selectedUserId]: newRole\n    }));\n  };\n\n  // Call API to save changes\n  const handleSaveRole = async selectedUserId => {\n    const newRole = pendingRoles[selectedUserId];\n    if (!newRole) return;\n    try {\n      setUpdateError(null);\n      await apiClient.put(`/users/${selectedUserId}/role`, {\n        role: newRole\n      });\n\n      // On success, clear the pending state for this user\n      setPendingRoles(prev => {\n        const newPending = {\n          ...prev\n        };\n        delete newPending[selectedUserId];\n        return newPending;\n      });\n\n      // Refetch all users to confirm the change from the server\n      fetchUsers();\n    } catch (err) {\n      setUpdateError('Failed to update role.');\n      console.error(err);\n    }\n  };\n  if (fetchError) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500 text-center\",\n      children: fetchError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 768,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto bg-white dark:bg-black/10 p-8 rounded-2xl shadow-2xl border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold mb-6 text-gray-900 dark:text-gray-100\",\n      children: \"User Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 773,\n      columnNumber: 7\n    }, this), updateError && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500 text-center mb-4 bg-red-100 border border-red-400 p-3 rounded-lg\",\n      children: updateError\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 776,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-x-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full table-auto min-w-max\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"bg-gray-100 dark:bg-slate-800/20 text-left text-gray-700 dark:text-gray-300 uppercase text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 font-semibold\",\n              children: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 785,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 font-semibold\",\n              children: \"Role\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 786,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 font-semibold\",\n              children: \"Actions\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 787,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 784,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 783,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          className: \"text-gray-900 dark:text-gray-200\",\n          children: users.map(user => {\n            const hasPendingChange = pendingRoles[user._id] && pendingRoles[user._id] !== user.role;\n            return /*#__PURE__*/_jsxDEV(\"tr\", {\n              className: \"border-b border-gray-200 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-slate-800/10\",\n              children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4\",\n                children: user.username\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 796,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4\",\n                children: user.role\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 797,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                className: \"px-6 py-4\",\n                children: user._id === userId ? /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-medium text-gray-700 dark:text-gray-400\",\n                  children: \"Admin (You)\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 800,\n                  columnNumber: 23\n                }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center space-x-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"select\", {\n                    value: pendingRoles[user._id] || user.role,\n                    onChange: e => handleRoleSelect(user._id, e.target.value),\n                    className: \"px-3 py-2 border border-gray-300 dark:border-white/10 rounded-lg bg-white dark:bg-black/20 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300\",\n                    children: Object.values(ROLES).map(role => /*#__PURE__*/_jsxDEV(\"option\", {\n                      value: role,\n                      children: role\n                    }, role, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 809,\n                      columnNumber: 29\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 803,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    onClick: () => handleSaveRole(user._id),\n                    disabled: !hasPendingChange,\n                    className: \"px-4 py-2 rounded-lg text-sm font-semibold text-white bg-green-600 hover:bg-green-700 disabled:bg-gray-400/50 dark:disabled:bg-gray-700 disabled:cursor-not-allowed transition-all\",\n                    children: \"Save\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 812,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 802,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 798,\n                columnNumber: 19\n              }, this)]\n            }, user._id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 795,\n              columnNumber: 17\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 790,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 782,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 781,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 772,\n    columnNumber: 5\n  }, this);\n};\n\n// New Component for Audit Log\n_s1(AdminPage, \"w5bo08NXaWgBu4veqRtPzK1jB1Y=\", false, function () {\n  return [usePermissions];\n});\n_c0 = AdminPage;\nconst AuditLogPage = () => {\n  _s10();\n  const [logs, setLogs] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchLogs = async () => {\n      try {\n        setError(null);\n        setLoading(true);\n        // This endpoint doesn't exist, so it will fail.\n        // In a real app, this would return the audit logs.\n        const {\n          data\n        } = await apiClient.get('/audit-logs');\n        setLogs(data);\n      } catch (err) {\n        setError('Failed to fetch audit logs. Displaying mock data for demonstration.');\n        console.error(err);\n        // Load mock data on failure to demonstrate UI\n        setLogs(MOCK_AUDIT_LOGS);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchLogs();\n  }, []);\n  const formatTimestamp = isoString => {\n    return new Date(isoString).toLocaleString();\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-gray-800 dark:text-gray-400\",\n      children: \"Loading logs...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 864,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto bg-white dark:bg-black/10 p-8 rounded-2xl shadow-2xl border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold mb-6 text-gray-900 dark:text-gray-100\",\n      children: \"Audit Log\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 869,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-yellow-700 dark:text-yellow-400 text-center mb-4 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-400 dark:border-yellow-600 p-3 rounded-lg\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 872,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"overflow-x-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"table\", {\n        className: \"w-full table-auto min-w-max\",\n        children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n          children: /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"bg-gray-100 dark:bg-slate-800/20 text-left text-gray-700 dark:text-gray-300 uppercase text-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 font-semibold\",\n              children: \"Timestamp\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 881,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 font-semibold\",\n              children: \"Admin\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 882,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n              className: \"px-6 py-3 font-semibold\",\n              children: \"Action\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 883,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 880,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 879,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n          className: \"text-gray-900 dark:text-gray-200\",\n          children: logs.map(log => /*#__PURE__*/_jsxDEV(\"tr\", {\n            className: \"border-b border-gray-200 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-slate-800/10\",\n            children: [/*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 text-sm text-gray-700 dark:text-gray-400\",\n              children: formatTimestamp(log.timestamp)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 889,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4 font-medium\",\n              children: log.adminUsername\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 890,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n              className: \"px-6 py-4\",\n              children: [\"Changed \", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-blue-600 dark:text-blue-400\",\n                children: log.targetUsername\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 892,\n                columnNumber: 27\n              }, this), \"'s role from\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-red-600 dark:text-red-400\",\n                children: [\" \", log.oldRole, \" \"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 893,\n                columnNumber: 19\n              }, this), \" to\", /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"font-semibold text-green-600 dark:text-green-400\",\n                children: [\" \", log.newRole]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 894,\n                columnNumber: 19\n              }, this), \".\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 891,\n              columnNumber: 17\n            }, this)]\n          }, log._id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 888,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 886,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 878,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 877,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 868,\n    columnNumber: 5\n  }, this);\n};\n_s10(AuditLogPage, \"7cUBf/5kxDf7xSVzqIv9oFmaTIo=\");\n_c1 = AuditLogPage;\nconst ContentFormWrapper = ({\n  title,\n  children\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"max-w-2xl mx-auto bg-white dark:bg-black/10 p-8 md:p-10 rounded-2xl shadow-2xl border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg\",\n  children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n    className: \"text-3xl font-bold text-center mb-8 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500\",\n    children: title\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 908,\n    columnNumber: 5\n  }, this), children]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 907,\n  columnNumber: 3\n}, this);\n_c10 = ContentFormWrapper;\nconst CreatePostPage = () => {\n  _s11();\n  const [title, setTitle] = useState('');\n  const [body, setBody] = useState('');\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(null);\n    if (!title || !body) {\n      setError('Title and body are required.');\n      return;\n    }\n    try {\n      await apiClient.post('/content', {\n        title,\n        body\n      });\n      navigate('/');\n    } catch (err) {\n      var _err$response3, _err$response3$data;\n      setError(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || 'Failed to create post.');\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(ContentFormWrapper, {\n    title: \"Create New Post\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 text-center mb-4 text-sm\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 940,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-800 dark:text-gray-200 mb-2 font-medium\",\n          htmlFor: \"title\",\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 942,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"title\",\n          value: title,\n          onChange: e => setTitle(e.target.value),\n          className: \"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 943,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 941,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-800 dark:text-gray-200 mb-2 font-medium\",\n          htmlFor: \"body\",\n          children: \"Body\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 952,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"body\",\n          rows: \"10\",\n          value: body,\n          onChange: e => setBody(e.target.value),\n          className: \"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 953,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 951,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2.5 rounded-lg shadow-lg shadow-blue-500/30 dark:shadow-blue-400/20 hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105\",\n        children: \"Publish Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 961,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 939,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 938,\n    columnNumber: 5\n  }, this);\n};\n_s11(CreatePostPage, \"bm2IKmFZccU/natvDxr4F8Pnawc=\", false, function () {\n  return [useNavigate];\n});\n_c11 = CreatePostPage;\nconst EditPostPage = () => {\n  _s12();\n  const [title, setTitle] = useState('');\n  const [body, setBody] = useState('');\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const navigate = useNavigate();\n  const {\n    id\n  } = useParams();\n  useEffect(() => {\n    const fetchPost = async () => {\n      try {\n        const {\n          data\n        } = await apiClient.get(`/content/${id}`);\n        setTitle(data.title);\n        setBody(data.body);\n        setLoading(false);\n      } catch (err) {\n        setError('Failed to fetch post data. You may not have permission to edit this.');\n        console.error(err);\n        setLoading(false);\n      }\n    };\n    fetchPost();\n  }, [id]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(null);\n    if (!title || !body) {\n      setError('Title and body are required.');\n      return;\n    }\n    try {\n      await apiClient.put(`/content/${id}`, {\n        title,\n        body\n      });\n      navigate('/');\n    } catch (err) {\n      var _err$response4, _err$response4$data;\n      setError(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || 'Failed to update post.');\n      console.error(err);\n    }\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"text-center text-gray-800 dark:text-gray-400\",\n      children: \"Loading post...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1013,\n      columnNumber: 12\n    }, this);\n  }\n  if (error && !title) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500 text-center\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1017,\n      columnNumber: 13\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(ContentFormWrapper, {\n    title: \"Edit Post\",\n    children: /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 text-center mb-4 text-sm\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1023,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-800 dark:text-gray-200 mb-2 font-medium\",\n          htmlFor: \"title\",\n          children: \"Title\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1025,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"title\",\n          value: title,\n          onChange: e => setTitle(e.target.value),\n          className: \"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1026,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1024,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-800 dark:text-gray-200 mb-2 font-medium\",\n          htmlFor: \"body\",\n          children: \"Body\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1035,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"textarea\", {\n          id: \"body\",\n          rows: \"10\",\n          value: body,\n          onChange: e => setBody(e.target.value),\n          className: \"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1036,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1034,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2.5 rounded-lg shadow-lg shadow-blue-500/30 dark:shadow-blue-400/20 hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105\",\n        children: \"Update Post\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1044,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1022,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1021,\n    columnNumber: 5\n  }, this);\n};\n_s12(EditPostPage, \"ilVgnhi4OrgSq5WncZE7g+7CwBk=\", false, function () {\n  return [useNavigate, useParams];\n});\n_c12 = EditPostPage;\nconst UnauthorizedPage = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center p-10 bg-white dark:bg-black/10 rounded-2xl shadow-2xl max-w-lg mx-auto border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-yellow-500 dark:from-red-400 dark:to-yellow-400\",\n      children: \"Access Denied\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1058,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"mt-6 text-xl text-gray-800 dark:text-gray-300\",\n      children: \"You do not have the required permissions to view this page.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1059,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      className: \"mt-8 inline-block bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-lg shadow-md hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105\",\n      children: \"Go Back to Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1060,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1057,\n    columnNumber: 5\n  }, this);\n};\n_c13 = UnauthorizedPage;\nconst ProtectedRoute = ({\n  allowedRoles\n}) => {\n  _s13();\n  const {\n    user\n  } = useAuth();\n  const location = useLocation();\n  const {\n    userRole\n  } = usePermissions();\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1073,\n      columnNumber: 12\n    }, this);\n  }\n  if (allowedRoles && !allowedRoles.includes(userRole)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/unauthorized\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1077,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 1080,\n    columnNumber: 10\n  }, this);\n};\n_s13(ProtectedRoute, \"mY78XIREVb2K+tg9g3GlF++YEw4=\", false, function () {\n  return [useAuth, useLocation, usePermissions];\n});\n_c14 = ProtectedRoute;\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(ThemeProvider, {\n    children: [/*#__PURE__*/_jsxDEV(GlobalStyles, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1086,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(AuthProvider, {\n      children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n        children: /*#__PURE__*/_jsxDEV(Routes, {\n          children: /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/\",\n            element: /*#__PURE__*/_jsxDEV(Layout, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1090,\n              columnNumber: 38\n            }, this),\n            children: [/*#__PURE__*/_jsxDEV(Route, {\n              path: \"/login\",\n              element: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1092,\n                columnNumber: 45\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1092,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/register\",\n              element: /*#__PURE__*/_jsxDEV(RegisterPage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1093,\n                columnNumber: 48\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1093,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              path: \"/unauthorized\",\n              element: /*#__PURE__*/_jsxDEV(UnauthorizedPage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1094,\n                columnNumber: 52\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1094,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1096,\n                columnNumber: 31\n              }, this),\n              children: /*#__PURE__*/_jsxDEV(Route, {\n                index: true,\n                element: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1097,\n                  columnNumber: 39\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1097,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1096,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                allowedRoles: [ROLES.Admin, ROLES.Editor]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1100,\n                columnNumber: 31\n              }, this),\n              children: [/*#__PURE__*/_jsxDEV(Route, {\n                path: \"create\",\n                element: /*#__PURE__*/_jsxDEV(CreatePostPage, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1101,\n                  columnNumber: 47\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1101,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"edit/:id\",\n                element: /*#__PURE__*/_jsxDEV(EditPostPage, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1102,\n                  columnNumber: 49\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1102,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1100,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Route, {\n              element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n                allowedRoles: [ROLES.Admin]\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1105,\n                columnNumber: 31\n              }, this),\n              children: [/*#__PURE__*/_jsxDEV(Route, {\n                path: \"admin\",\n                element: /*#__PURE__*/_jsxDEV(Navigate, {\n                  to: \"/admin/users\",\n                  replace: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1106,\n                  columnNumber: 46\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1106,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"admin/users\",\n                element: /*#__PURE__*/_jsxDEV(AdminPage, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1107,\n                  columnNumber: 52\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1107,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(Route, {\n                path: \"admin/audit\",\n                element: /*#__PURE__*/_jsxDEV(AuditLogPage, {}, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1108,\n                  columnNumber: 52\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1108,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1105,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1090,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1089,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1088,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1087,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1085,\n    columnNumber: 5\n  }, this);\n}\n_c15 = App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0, _c1, _c10, _c11, _c12, _c13, _c14, _c15;\n$RefreshReg$(_c, \"GlobalStyles\");\n$RefreshReg$(_c2, \"ThemeProvider\");\n$RefreshReg$(_c3, \"AuthProvider\");\n$RefreshReg$(_c4, \"Layout\");\n$RefreshReg$(_c5, \"HomePage\");\n$RefreshReg$(_c6, \"ContentItem\");\n$RefreshReg$(_c7, \"AuthFormWrapper\");\n$RefreshReg$(_c8, \"LoginPage\");\n$RefreshReg$(_c9, \"RegisterPage\");\n$RefreshReg$(_c0, \"AdminPage\");\n$RefreshReg$(_c1, \"AuditLogPage\");\n$RefreshReg$(_c10, \"ContentFormWrapper\");\n$RefreshReg$(_c11, \"CreatePostPage\");\n$RefreshReg$(_c12, \"EditPostPage\");\n$RefreshReg$(_c13, \"UnauthorizedPage\");\n$RefreshReg$(_c14, \"ProtectedRoute\");\n$RefreshReg$(_c15, \"App\");","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","BrowserRouter","Routes","Route","Link","useNavigate","Outlet","useLocation","Navigate","useParams","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","GlobalStyles","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","ROLES","Admin","Editor","Viewer","MOCK_AUDIT_LOGS","_id","adminUsername","targetUsername","oldRole","newRole","timestamp","Date","now","toISOString","PERMISSIONS","content","users","auditlog","AuthContext","ThemeContext","apiClient","create","baseURL","withCredentials","interceptors","request","use","config","accessToken","JSON","parse","localStorage","getItem","headers","error","Promise","reject","response","_error$response","originalRequest","status","_retry","data","post","newAccessToken","authData","setItem","stringify","refreshError","removeItem","window","location","href","ThemeProvider","_s","theme","setTheme","root","document","documentElement","classList","add","remove","toggleTheme","prev","Provider","value","_c2","useTheme","_s2","AuthProvider","_s3","user","setUser","loading","setLoading","console","login","userData","logout","_c3","useAuth","_s4","usePermissions","_s5","can","action","subject","_PERMISSIONS$user$rol","resource","requiredPermission","split","userPermissions","role","includes","authorId","id","canRead","canCreate","canUpdate","canDelete","canManageUsers","canReadAuditLog","userRole","userId","Layout","_s6","navigate","handleLogout","className","to","username","onClick","xmlns","viewBox","fill","d","fillRule","clipRule","_c4","HomePage","_s7","setContent","setError","fetchContent","get","err","length","map","item","ContentItem","onDelete","_c5","_s8","showConfirm","setShowConfirm","deleteError","setDeleteError","author","canEdit","canRemove","requestDelete","cancelDelete","confirmDelete","delete","title","body","_c6","AuthFormWrapper","_c7","LoginPage","_s9","setUsername","password","setPassword","handleSubmit","e","preventDefault","_err$response","_err$response$data","message","handleDemoLogin","onSubmit","htmlFor","type","onChange","target","_c8","RegisterPage","_s0","setRole","_err$response2","_err$response2$data","_c9","AdminPage","_s1","setUsers","fetchError","setFetchError","updateError","setUpdateError","pendingRoles","setPendingRoles","fetchUsers","handleRoleSelect","selectedUserId","handleSaveRole","put","newPending","hasPendingChange","Object","values","disabled","_c0","AuditLogPage","_s10","logs","setLogs","fetchLogs","formatTimestamp","isoString","toLocaleString","log","_c1","ContentFormWrapper","_c10","CreatePostPage","_s11","setTitle","setBody","_err$response3","_err$response3$data","rows","_c11","EditPostPage","_s12","fetchPost","_err$response4","_err$response4$data","_c12","UnauthorizedPage","_c13","ProtectedRoute","allowedRoles","_s13","state","from","replace","_c14","App","path","element","index","_c15","$RefreshReg$"],"sources":["C:/codes/Project FSD/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\r\nimport {\r\n  BrowserRouter,\r\n  Routes,\r\n  Route,\r\n  Link,\r\n  useNavigate,\r\n  Outlet,\r\n  useLocation,\r\n  Navigate,\r\n  useParams,\r\n} from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\nconst GlobalStyles = () => (\r\n  <style>{`\r\n    body {\r\n      overflow-y: scroll;\r\n    }\r\n    \r\n    .aurora-background {\r\n      position: fixed;\r\n      top: 0;\r\n      left: 0;\r\n      width: 100%;\r\n      height: 100vh;\r\n      z-index: -10;\r\n      overflow: hidden;\r\n    }\r\n    \r\n    .dark .aurora-background {\r\n      background: #030712;\r\n    }\r\n    \r\n    .light .aurora-background {\r\n      background: #f3f4f6;\r\n    }\r\n\r\n    .aurora-background::before,\r\n    .aurora-background::after {\r\n      content: '';\r\n      position: absolute;\r\n      width: 60vmax;\r\n      height: 60vmax;\r\n      border-radius: 50%;\r\n      filter: blur(120px);\r\n      animation: aurora 20s linear infinite;\r\n    }\r\n    \r\n    .dark .aurora-background::before {\r\n      background: radial-gradient(circle, #7c3aed, transparent 40%);\r\n      top: -30vmax;\r\n      left: -30vmax;\r\n      opacity: 0.25;\r\n    }\r\n    \r\n    .dark .aurora-background::after {\r\n      background: radial-gradient(circle, #2563eb, transparent 40%);\r\n      bottom: -30vmax;\r\n      right: -30vmax;\r\n      animation-delay: 5s;\r\n      opacity: 0.25;\r\n    }\r\n\r\n    .light .aurora-background::before {\r\n      background: radial-gradient(circle, #a5b4fc, transparent 40%);\r\n      top: -30vmax;\r\n      left: -30vmax;\r\n      opacity: 0.3;\r\n    }\r\n    \r\n    .light .aurora-background::after {\r\n      background: radial-gradient(circle, #7dd3fc, transparent 40%);\r\n      bottom: -30vmax;\r\n      right: -30vmax;\r\n      animation-delay: 5s;\r\n      opacity: 0.3;\r\n    }\r\n\r\n    @keyframes aurora {\r\n      0% { transform: rotate(0deg) scale(1); }\r\n      50% { transform: rotate(180deg) scale(1.2); }\r\n      100% { transform: rotate(360deg) scale(1); }\r\n    }\r\n  `}</style>\r\n);\r\n\r\nconst ROLES = {\r\n  Admin: 'Admin',\r\n  Editor: 'Editor',\r\n  Viewer: 'Viewer',\r\n};\r\n\r\n// Mock data for Audit Log demonstration\r\nconst MOCK_AUDIT_LOGS = [\r\n  {\r\n    _id: '1',\r\n    adminUsername: 'admin',\r\n    targetUsername: 'editor',\r\n    oldRole: 'Viewer',\r\n    newRole: 'Editor',\r\n    timestamp: new Date(Date.now() - 2 * 60 * 60 * 1000).toISOString(), // 2 hours ago\r\n  },\r\n  {\r\n    _id: '2',\r\n    adminUsername: 'admin',\r\n    targetUsername: 'newuser',\r\n    oldRole: 'Editor',\r\n    newRole: 'Viewer',\r\n    timestamp: new Date(Date.now() - 24 * 60 * 60 * 1000).toISOString(), // 1 day ago\r\n  },\r\n  {\r\n    _id: '3',\r\n    adminUsername: 'admin',\r\n    targetUsername: 'anotheruser',\r\n    oldRole: 'Viewer',\r\n    newRole: 'Editor',\r\n    timestamp: new Date(Date.now() - 3 * 24 * 60 * 60 * 1000).toISOString(), // 3 days ago\r\n  },\r\n];\r\n\r\n\r\nconst PERMISSIONS = {\r\n  [ROLES.Admin]: {\r\n    content: ['create', 'read', 'update_all', 'delete_all'],\r\n    users: ['read', 'update', 'delete'],\r\n    auditlog: ['read'],\r\n  },\r\n  [ROLES.Editor]: {\r\n    content: ['create', 'read', 'update_own', 'delete_own'],\r\n    users: [],\r\n    auditlog: [],\r\n  },\r\n  [ROLES.Viewer]: {\r\n    content: ['read'],\r\n    users: [],\r\n    auditlog: [],\r\n  },\r\n};\r\n\r\nconst AuthContext = createContext(null);\r\nconst ThemeContext = createContext(null);\r\n\r\nconst apiClient = axios.create({\r\n  baseURL: 'http://localhost:5001/api',\r\n  withCredentials: true,\r\n});\r\n\r\napiClient.interceptors.request.use(\r\n  (config) => {\r\n    const { accessToken } = JSON.parse(localStorage.getItem('auth') || '{}');\r\n    if (accessToken) {\r\n      config.headers['Authorization'] = `Bearer ${accessToken}`;\r\n    }\r\n    return config;\r\n  },\r\n  (error) => Promise.reject(error)\r\n);\r\n\r\napiClient.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const originalRequest = error.config;\r\n    if (error.response?.status === 401 && !originalRequest._retry) {\r\n      originalRequest._retry = true;\r\n      try {\r\n        const { data } = await apiClient.post('/auth/refresh');\r\n        const newAccessToken = data.accessToken;\r\n        \r\n        let authData = JSON.parse(localStorage.getItem('auth') || '{}');\r\n        authData.accessToken = newAccessToken;\r\n        localStorage.setItem('auth', JSON.stringify(authData));\r\n        \r\n        originalRequest.headers['Authorization'] = `Bearer ${newAccessToken}`;\r\n        return apiClient(originalRequest);\r\n      } catch (refreshError) {\r\n        localStorage.removeItem('auth');\r\n        window.location.href = '/login';\r\n        return Promise.reject(refreshError);\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\nconst ThemeProvider = ({ children }) => {\r\n  const [theme, setTheme] = useState('dark');\r\n\r\n  useEffect(() => {\r\n    const root = window.document.documentElement;\r\n    if (theme === 'dark') {\r\n      root.classList.add('dark');\r\n      root.classList.remove('light');\r\n    } else {\r\n      root.classList.remove('dark');\r\n      root.classList.add('light');\r\n    }\r\n  }, [theme]);\r\n\r\n  const toggleTheme = () => {\r\n    setTheme((prev) => (prev === 'light' ? 'dark' : 'light'));\r\n  };\r\n\r\n  return (\r\n    <ThemeContext.Provider value={{ theme, toggleTheme }}>\r\n      {children}\r\n    </ThemeContext.Provider>\r\n  );\r\n};\r\n\r\nconst useTheme = () => useContext(ThemeContext);\r\n\r\nconst AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    try {\r\n      const authData = JSON.parse(localStorage.getItem('auth'));\r\n      if (authData && authData.user) {\r\n        setUser(authData.user);\r\n      }\r\n    } catch (error) {\r\n      console.error('Failed to parse auth data from localStorage');\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const login = (userData) => {\r\n    const authData = {\r\n      accessToken: userData.accessToken,\r\n      user: userData.user,\r\n    };\r\n    localStorage.setItem('auth', JSON.stringify(authData));\r\n    setUser(userData.user);\r\n    return userData.user; // Return user data for navigation\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await apiClient.post('/auth/logout');\r\n    } catch (error) {\r\n      console.error('Logout failed', error);\r\n    }\r\n    localStorage.removeItem('auth');\r\n    setUser(null);\r\n  };\r\n\r\n  const value = { user, login, logout, loading };\r\n\r\n  return (\r\n    <AuthContext.Provider value={value}>\r\n      {!loading && children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nconst useAuth = () => {\r\n  return useContext(AuthContext);\r\n};\r\n\r\nconst usePermissions = () => {\r\n  const { user } = useAuth();\r\n  \r\n  const can = (action, subject) => {\r\n    if (!user) return false;\r\n    \r\n    const [resource, requiredPermission] = action.split(':');\r\n    const userPermissions = PERMISSIONS[user.role]?.[resource] || [];\r\n\r\n    if (userPermissions.includes(requiredPermission) || userPermissions.includes(`${requiredPermission}_all`)) {\r\n      return true;\r\n    }\r\n\r\n    if (userPermissions.includes(`${requiredPermission}_own`)) {\r\n      if (!subject) {\r\n        return true;\r\n      }\r\n      return subject.authorId === user.id;\r\n    }\r\n    \r\n    return false;\r\n  };\r\n\r\n  const canRead = (resource = 'content') => can(`${resource}:read`);\r\n  const canCreate = (resource = 'content') => can(`${resource}:create`);\r\n  const canUpdate = (subject, resource = 'content') => can(`${resource}:update`, subject);\r\n  const canDelete = (subject, resource = 'content') => can(`${resource}:delete`, subject);\r\n  const canManageUsers = () => can('users:read');\r\n  const canReadAuditLog = () => can('auditlog:read');\r\n\r\n\r\n  return { can, canRead, canCreate, canUpdate, canDelete, canManageUsers, canReadAuditLog, userRole: user?.role, userId: user?.id };\r\n};\r\n\r\nconst Layout = () => {\r\n  const { user, logout } = useAuth();\r\n  const navigate = useNavigate();\r\n  const { canManageUsers, canReadAuditLog } = usePermissions();\r\n  const { theme, toggleTheme } = useTheme();\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen font-sans relative z-10 text-gray-900 dark:text-gray-100\">\r\n      <div className=\"aurora-background\" />\r\n      <nav className=\"bg-white dark:bg-black/10 shadow-lg border-b border-gray-200 dark:border-white/5 dark:backdrop-blur-lg sticky top-0 z-50\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <div className=\"flex justify-between h-16\">\r\n            <div className=\"flex items-center\">\r\n              <Link to=\"/\" className=\"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500\">\r\n                RBAC Platform\r\n              </Link>\r\n            </div>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <Link to=\"/\" className=\"text-gray-800 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 px-3 py-2 rounded-md text-sm font-medium transition-colors\">\r\n                Home\r\n              </Link>\r\n              {canManageUsers() && (\r\n                <Link to=\"/admin/users\" className=\"text-gray-800 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 px-3 py-2 rounded-md text-sm font-medium transition-colors\">\r\n                  User Panel\r\n                </Link>\r\n              )}\r\n              {canReadAuditLog() && (\r\n                <Link to=\"/admin/audit\" className=\"text-gray-800 dark:text-gray-200 hover:text-blue-500 dark:hover:text-blue-400 px-3 py-2 rounded-md text-sm font-medium transition-colors\">\r\n                  Audit Log\r\n                </Link>\r\n              )}\r\n              {user ? (\r\n                <>\r\n                  <span className=\"text-gray-800 dark:text-gray-200 text-sm\">Hi, {user.username} ({user.role})</span>\r\n                  <button\r\n                    onClick={handleLogout}\r\n                    className=\"bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-md hover:from-red-600 hover:to-red-700 transition-all duration-300 transform hover:scale-105\"\r\n                  >\r\n                    Logout\r\n                  </button>\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <Link\r\n                    to=\"/login\"\r\n                    className=\"text-gray-800 dark:text-gray-200 bg-gray-100 dark:bg-black/20 border border-gray-300 dark:border-white/10 px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-200 dark:hover:bg-black/40 transition-all duration-300\"\r\n                  >\r\n                    Login\r\n                  </Link>\r\n                  <Link\r\n                    to=\"/register\"\r\n                    className=\"bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium shadow-md hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105\"\r\n                  >\r\n                    Sign Up\r\n                  </Link>\r\n                </>\r\n              )}\r\n              <button \r\n                onClick={toggleTheme} \r\n                className=\"flex items-center justify-center w-10 h-10 rounded-lg bg-gray-200 dark:bg-black/20 text-gray-800 dark:text-gray-200 hover:bg-gray-300 dark:hover:bg-black/30 transition-colors\"\r\n                aria-label=\"Toggle theme\"\r\n              >\r\n                {theme === 'light' ? \r\n                  (<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path d=\"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z\" /></svg>) : \r\n                  (<svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-5 w-5\" viewBox=\"0 0 20 20\" fill=\"currentColor\"><path fillRule=\"evenodd\" d=\"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm-7.071 0l-.707.707a1 1 0 001.414 1.414l.707-.707a1 1 0 00-1.414-1.414zM10 16a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM3 9a1 1 0 011-1h1a1 1 0 110 2H4a1 1 0 01-1-1zm14 0a1 1 0 011-1h1a1 1 0 110 2h-1a1 1 0 01-1-1zM4.95 15.05l-.707-.707a1 1 0 00-1.414 1.414l.707.707a1 1 0 001.414-1.414zM15.05 4.95l.707-.707a1 1 0 00-1.414-1.414l-.707.707a1 1 0 001.414 1.414z\" clipRule=\"evenodd\" /></svg>)\r\n                }\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </nav>\r\n      <main className=\"py-10 relative z-10\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n          <Outlet />\r\n        </div>\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst HomePage = () => {\r\n  const [content, setContent] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const { canCreate } = usePermissions();\r\n  \r\n  const fetchContent = async () => {\r\n    try {\r\n      setError(null);\r\n      const { data } = await apiClient.get('/content');\r\n      setContent(data);\r\n    } catch (err) {\r\n      setError('Failed to fetch content.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchContent();\r\n  }, []);\r\n\r\n  if (error) {\r\n    return <p className=\"text-red-500 text-center\">{error}</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <div className=\"flex justify-between items-center mb-8\">\r\n        <h1 className=\"text-4xl font-bold text-gray-900 dark:text-gray-100\">Content Feed</h1>\r\n        {canCreate() && (\r\n          <Link \r\n            to=\"/create\" \r\n            className=\"bg-gradient-to-r from-green-500 to-green-600 text-white px-5 py-2.5 rounded-lg shadow-md hover:from-green-600 hover:to-green-700 transition-all duration-300 transform hover:scale-105\"\r\n          >\r\n            + Create New Post\r\n          </Link>\r\n        )}\r\n      </div>\r\n      <div className=\"space-y-6\">\r\n        {content.length > 0 ? content.map((item) => (\r\n          <ContentItem key={item._id} item={item} onDelete={fetchContent} />\r\n        )) : (\r\n          <p className=\"text-gray-700 dark:text-gray-400 text-center\">No content yet. Be the first to create a post!</p>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ContentItem = ({ item, onDelete }) => {\r\n  const { canUpdate, canDelete } = usePermissions();\r\n  const [showConfirm, setShowConfirm] = useState(false);\r\n  const [deleteError, setDeleteError] = useState(null);\r\n  \r\n  const subject = { authorId: item.author._id };\r\n  const canEdit = canUpdate(subject);\r\n  const canRemove = canDelete(subject);\r\n\r\n  const requestDelete = () => {\r\n    setDeleteError(null);\r\n    setShowConfirm(true);\r\n  };\r\n\r\n  const cancelDelete = () => {\r\n    setShowConfirm(false);\r\n  };\r\n\r\n  const confirmDelete = async () => {\r\n    try {\r\n      await apiClient.delete(`/content/${item._id}`);\r\n      onDelete();\r\n      setShowConfirm(false);\r\n    } catch (err) {\r\n      setDeleteError('Failed to delete post.');\r\n      console.error(err);\r\n      setShowConfirm(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"bg-white dark:bg-black/10 p-6 rounded-2xl shadow-lg border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg transition-all duration-300 hover:shadow-xl\">\r\n      <div className=\"flex justify-between items-start\">\r\n        <div>\r\n          <h2 className=\"text-2xl font-semibold text-gray-900 dark:text-gray-100 mb-2\">{item.title}</h2>\r\n          <p className=\"text-gray-700 dark:text-gray-400 text-sm mb-4\">By <span className=\"font-medium text-gray-900 dark:text-gray-200\">{item.author.username}</span></p>\r\n        </div>\r\n        <div className=\"flex space-x-2 flex-shrink-0 ml-4\">\r\n          {canEdit && (\r\n            <Link \r\n              to={`/edit/${item._id}`}\r\n              className=\"text-sm bg-gradient-to-r from-yellow-400 to-yellow-500 text-white px-4 py-2 rounded-lg shadow-md hover:from-yellow-500 hover:to-yellow-600 transition-all duration-300 transform hover:scale-105\"\r\n              title=\"Edit this post\"\r\n            >\r\n              Edit\r\n            </Link>\r\n          )}\r\n          {canRemove && (\r\n            <button\r\n              onClick={requestDelete}\r\n              className=\"text-sm bg-gradient-to-r from-red-500 to-red-600 text-white px-4 py-2 rounded-lg shadow-md hover:from-red-600 hover:to-red-700 transition-all duration-300 transform hover:scale-105\"\r\n              title=\"Delete this post\"\r\n            >\r\n              Delete\r\n            </button>\r\n          )}\r\n        </div>\r\n      </div>\r\n      <p className=\"text-gray-800 dark:text-gray-300 leading-relaxed\">{item.body}</p>\r\n\r\n      {deleteError && (\r\n        <p className=\"text-red-500 text-sm mt-4 text-center bg-red-100 border border-red-400 p-3 rounded-lg\">{deleteError}</p>\r\n      )}\r\n\r\n      {showConfirm && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"bg-white dark:bg-gray-900 p-8 rounded-2xl shadow-2xl max-w-sm w-full border border-gray-200 dark:border-white/10\">\r\n            <h3 className=\"text-2xl font-bold mb-6 text-center text-gray-900 dark:text-gray-100\">Are you sure?</h3>\r\n            <p className=\"text-gray-800 dark:text-gray-300 mb-8 text-center\">\r\n              Do you really want to delete this post? This action cannot be undone.\r\n            </p>\r\n            <div className=\"flex justify-around space-x-4\">\r\n              <button\r\n                onClick={cancelDelete}\r\n                className=\"w-full bg-gray-200 dark:bg-gray-700 text-gray-800 dark:text-gray-200 px-6 py-3 rounded-lg font-semibold hover:bg-gray-300 dark:hover:bg-gray-600 transition-all duration-300\"\r\n              >\r\n                Cancel\r\n              </button>\r\n              <button\r\n                onClick={confirmDelete}\r\n                className=\"w-full bg-gradient-to-r from-red-500 to-red-600 text-white px-6 py-3 rounded-lg shadow-md hover:from-red-600 hover:to-red-700 transition-all duration-300 transform hover:scale-105\"\r\n              >\r\n                Delete\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst AuthFormWrapper = ({ title, children }) => (\r\n  <div className=\"max-w-md mx-auto bg-white dark:bg-black/10 p-8 md:p-10 rounded-2xl shadow-2xl border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg\">\r\n    <h2 className=\"text-3xl font-bold text-center mb-8 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500\">\r\n      {title}\r\n    </h2>\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst LoginPage = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const { login } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    try {\r\n      const { data } = await apiClient.post('/auth/login', { username, password });\r\n      const user = login(data); // login now returns the user\r\n      \r\n      // Navigate based on role\r\n      if (user.role === ROLES.Admin) {\r\n        navigate('/admin/users');\r\n      } else {\r\n        navigate('/');\r\n      }\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Invalid username or password.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  const handleDemoLogin = (role) => {\r\n    if (role === 'admin') {\r\n      setUsername('admin');\r\n      setPassword('adminpassword');\r\n    } else if (role === 'editor') {\r\n      setUsername('editor');\r\n      setPassword('editorpassword');\r\n    } else if (role === 'viewer') {\r\n      setUsername('viewer');\r\n      setPassword('viewerpassword');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthFormWrapper title=\"Welcome Back!\">\r\n      <form onSubmit={handleSubmit}>\r\n        {error && <p className=\"text-red-500 text-center mb-4 text-sm\">{error}</p>}\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-gray-800 dark:text-gray-200 mb-2 font-medium\" htmlFor=\"username\">Username</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"username\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            className=\"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-800 dark:text-gray-200 mb-2 font-medium\" htmlFor=\"password\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\r\n          />\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2.5 rounded-lg shadow-lg shadow-blue-500/30 dark:shadow-blue-400/20 hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105\"\r\n        >\r\n          Login\r\n        </button>\r\n      </form>\r\n      \r\n      <div className=\"mt-8 text-center\">\r\n        <p className=\"text-sm text-gray-800 dark:text-gray-300 mb-4\">Or try a demo user:</p>\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-3 gap-3\">\r\n          <button \r\n            type=\"button\" \r\n            onClick={() => handleDemoLogin('admin')} \r\n            className=\"w-full px-4 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-purple-500 to-indigo-600 shadow-md hover:from-purple-600 hover:to-indigo-700 transition-all duration-300 transform hover:scale-105\"\r\n          >\r\n            Admin\r\n          </button>\r\n          <button \r\n            type=\"button\" \r\n            onClick={() => handleDemoLogin('editor')} \r\n            className=\"w-full px-4 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-blue-500 to-cyan-600 shadow-md hover:from-blue-600 hover:to-cyan-700 transition-all duration-300 transform hover:scale-105\"\r\n          >\r\n            Editor\r\n          </button>\r\n          <button \r\n            type=\"button\" \r\n            onClick={() => handleDemoLogin('viewer')} \r\n            className=\"w-full px-4 py-2.5 rounded-lg text-sm font-semibold text-white bg-gradient-to-r from-teal-500 to-emerald-600 shadow-md hover:from-teal-600 hover:to-emerald-700 transition-all duration-300 transform hover:scale-105\"\r\n          >\r\n            Viewer\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      <p className=\"mt-8 text-center text-sm text-gray-700 dark:text-gray-400\">\r\n        Don't have an account?{' '}\r\n        <Link to=\"/register\" className=\"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300\">\r\n          Sign Up\r\n        </Link>\r\n      </p>\r\n    </AuthFormWrapper>\r\n  );\r\n};\r\n\r\nconst RegisterPage = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [role, setRole] = useState(ROLES.Viewer); // Default to Viewer\r\n  const [error, setError] = useState(null);\r\n  const { login } = useAuth();\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    try {\r\n      const { data } = await apiClient.post('/auth/register', { username, password, role });\r\n      login(data);\r\n      navigate('/');\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Failed to register. Username might be taken.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <AuthFormWrapper title=\"Create Your Account\">\r\n      <form onSubmit={handleSubmit}>\r\n        {error && <p className=\"text-red-500 text-center mb-4 text-sm\">{error}</p>}\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-gray-800 dark:text-gray-200 mb-2 font-medium\" htmlFor=\"username\">Username</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"username\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            className=\"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\r\n          />\r\n        </div>\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-gray-800 dark:text-gray-200 mb-2 font-medium\" htmlFor=\"password\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            id=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-800 dark:text-gray-200 mb-2 font-medium\" htmlFor=\"role\">Register as</label>\r\n          <select\r\n            id=\"role\"\r\n            value={role}\r\n            onChange={(e) => setRole(e.target.value)}\r\n            className=\"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\r\n          >\r\n            <option value={ROLES.Viewer}>Viewer</option>\r\n            <option value={ROLES.Editor}>Editor</option>\r\n          </select>\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full bg-gradient-to-r from-green-500 to-green-600 text-white px-4 py-2.5 rounded-lg shadow-lg shadow-green-500/30 dark:shadow-green-400/20 hover:from-green-600 hover:to-green-700 transition-all duration-300 transform hover:scale-105\"\r\n        >\r\n          Register\r\n        </button>\r\n      </form>\r\n      <p className=\"mt-6 text-center text-sm text-gray-700 dark:text-gray-400\">\r\n        Already have an account?{' '}\r\n        <Link to=\"/login\" className=\"font-medium text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300\">\r\n          Login\r\n        </Link>\r\n      </p>\r\n    </AuthFormWrapper>\r\n  );\r\n};\r\n\r\nconst AdminPage = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [fetchError, setFetchError] = useState(null);\r\n  const [updateError, setUpdateError] = useState(null);\r\n  const [pendingRoles, setPendingRoles] = useState({}); // Track pending changes\r\n  const { userId } = usePermissions(); // Get current user's ID\r\n\r\n  const fetchUsers = async () => {\r\n    try {\r\n      setFetchError(null);\r\n      const { data } = await apiClient.get('/users');\r\n      setUsers(data);\r\n    } catch (err) {\r\n      setFetchError('Failed to fetch users. The backend might not be running.');\r\n      console.error(err);\r\n      // In a real app, you might not want to clear users on failed refetch\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  // Update local state, don't call API\r\n  const handleRoleSelect = (selectedUserId, newRole) => {\r\n    setPendingRoles(prev => ({\r\n      ...prev,\r\n      [selectedUserId]: newRole,\r\n    }));\r\n  };\r\n\r\n  // Call API to save changes\r\n  const handleSaveRole = async (selectedUserId) => {\r\n    const newRole = pendingRoles[selectedUserId];\r\n    if (!newRole) return;\r\n  \r\n    try {\r\n      setUpdateError(null);\r\n      await apiClient.put(`/users/${selectedUserId}/role`, { role: newRole });\r\n      \r\n      // On success, clear the pending state for this user\r\n      setPendingRoles(prev => {\r\n        const newPending = { ...prev };\r\n        delete newPending[selectedUserId];\r\n        return newPending;\r\n      });\r\n      \r\n      // Refetch all users to confirm the change from the server\r\n      fetchUsers(); \r\n    } catch (err) {\r\n      setUpdateError('Failed to update role.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (fetchError) {\r\n    return <p className=\"text-red-500 text-center\">{fetchError}</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto bg-white dark:bg-black/10 p-8 rounded-2xl shadow-2xl border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg\">\r\n      <h2 className=\"text-3xl font-bold mb-6 text-gray-900 dark:text-gray-100\">User Management</h2>\r\n      \r\n      {updateError && (\r\n        <p className=\"text-red-500 text-center mb-4 bg-red-100 border border-red-400 p-3 rounded-lg\">\r\n          {updateError}\r\n        </p>\r\n      )}\r\n\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full table-auto min-w-max\">\r\n          <thead>\r\n            <tr className=\"bg-gray-100 dark:bg-slate-800/20 text-left text-gray-700 dark:text-gray-300 uppercase text-sm\">\r\n              <th className=\"px-6 py-3 font-semibold\">Username</th>\r\n              <th className=\"px-6 py-3 font-semibold\">Role</th>\r\n              <th className=\"px-6 py-3 font-semibold\">Actions</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"text-gray-900 dark:text-gray-200\">\r\n            {users.map((user) => {\r\n              const hasPendingChange = pendingRoles[user._id] && pendingRoles[user._id] !== user.role;\r\n              \r\n              return (\r\n                <tr key={user._id} className=\"border-b border-gray-200 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-slate-800/10\">\r\n                  <td className=\"px-6 py-4\">{user.username}</td>\r\n                  <td className=\"px-6 py-4\">{user.role}</td>\r\n                  <td className=\"px-6 py-4\">\r\n                    {user._id === userId ? (\r\n                      <span className=\"font-medium text-gray-700 dark:text-gray-400\">Admin (You)</span>\r\n                    ) : (\r\n                      <div className=\"flex items-center space-x-2\">\r\n                        <select\r\n                          value={pendingRoles[user._id] || user.role}\r\n                          onChange={(e) => handleRoleSelect(user._id, e.target.value)}\r\n                          className=\"px-3 py-2 border border-gray-300 dark:border-white/10 rounded-lg bg-white dark:bg-black/20 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300\"\r\n                        >\r\n                          {Object.values(ROLES).map((role) => (\r\n                            <option key={role} value={role}>{role}</option>\r\n                          ))}\r\n                        </select>\r\n                        <button\r\n                          onClick={() => handleSaveRole(user._id)}\r\n                          disabled={!hasPendingChange}\r\n                          className=\"px-4 py-2 rounded-lg text-sm font-semibold text-white bg-green-600 hover:bg-green-700 disabled:bg-gray-400/50 dark:disabled:bg-gray-700 disabled:cursor-not-allowed transition-all\"\r\n                        >\r\n                          Save\r\n                        </button>\r\n                      </div>\r\n                    )}\r\n                  </td>\r\n                </tr>\r\n              );\r\n            })}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// New Component for Audit Log\r\nconst AuditLogPage = () => {\r\n  const [logs, setLogs] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchLogs = async () => {\r\n      try {\r\n        setError(null);\r\n        setLoading(true);\r\n        // This endpoint doesn't exist, so it will fail.\r\n        // In a real app, this would return the audit logs.\r\n        const { data } = await apiClient.get('/audit-logs');\r\n        setLogs(data);\r\n      } catch (err) {\r\n        setError('Failed to fetch audit logs. Displaying mock data for demonstration.');\r\n        console.error(err);\r\n        // Load mock data on failure to demonstrate UI\r\n        setLogs(MOCK_AUDIT_LOGS);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchLogs();\r\n  }, []);\r\n\r\n  const formatTimestamp = (isoString) => {\r\n    return new Date(isoString).toLocaleString();\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"text-center text-gray-800 dark:text-gray-400\">Loading logs...</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto bg-white dark:bg-black/10 p-8 rounded-2xl shadow-2xl border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg\">\r\n      <h2 className=\"text-3xl font-bold mb-6 text-gray-900 dark:text-gray-100\">Audit Log</h2>\r\n      \r\n      {error && (\r\n        <p className=\"text-yellow-700 dark:text-yellow-400 text-center mb-4 bg-yellow-100 dark:bg-yellow-900/20 border border-yellow-400 dark:border-yellow-600 p-3 rounded-lg\">\r\n          {error}\r\n        </p>\r\n      )}\r\n\r\n      <div className=\"overflow-x-auto\">\r\n        <table className=\"w-full table-auto min-w-max\">\r\n          <thead>\r\n            <tr className=\"bg-gray-100 dark:bg-slate-800/20 text-left text-gray-700 dark:text-gray-300 uppercase text-sm\">\r\n              <th className=\"px-6 py-3 font-semibold\">Timestamp</th>\r\n              <th className=\"px-6 py-3 font-semibold\">Admin</th>\r\n              <th className=\"px-6 py-3 font-semibold\">Action</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"text-gray-900 dark:text-gray-200\">\r\n            {logs.map((log) => (\r\n              <tr key={log._id} className=\"border-b border-gray-200 dark:border-white/5 hover:bg-gray-50 dark:hover:bg-slate-800/10\">\r\n                <td className=\"px-6 py-4 text-sm text-gray-700 dark:text-gray-400\">{formatTimestamp(log.timestamp)}</td>\r\n                <td className=\"px-6 py-4 font-medium\">{log.adminUsername}</td>\r\n                <td className=\"px-6 py-4\">\r\n                  Changed <span className=\"font-semibold text-blue-600 dark:text-blue-400\">{log.targetUsername}</span>'s role from \r\n                  <span className=\"font-semibold text-red-600 dark:text-red-400\"> {log.oldRole} </span> to \r\n                  <span className=\"font-semibold text-green-600 dark:text-green-400\"> {log.newRole}</span>.\r\n                </td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\nconst ContentFormWrapper = ({ title, children }) => (\r\n  <div className=\"max-w-2xl mx-auto bg-white dark:bg-black/10 p-8 md:p-10 rounded-2xl shadow-2xl border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg\">\r\n    <h2 className=\"text-3xl font-bold text-center mb-8 text-transparent bg-clip-text bg-gradient-to-r from-blue-500 to-purple-600 dark:from-blue-400 dark:to-purple-500\">\r\n      {title}\r\n    </h2>\r\n    {children}\r\n  </div>\r\n);\r\n\r\nconst CreatePostPage = () => {\r\n  const [title, setTitle] = useState('');\r\n  const [body, setBody] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const navigate = useNavigate();\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    if (!title || !body) {\r\n      setError('Title and body are required.');\r\n      return;\r\n    }\r\n    try {\r\n      await apiClient.post('/content', { title, body });\r\n      navigate('/');\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Failed to create post.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <ContentFormWrapper title=\"Create New Post\">\r\n      <form onSubmit={handleSubmit}>\r\n        {error && <p className=\"text-red-500 text-center mb-4 text-sm\">{error}</p>}\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-gray-800 dark:text-gray-200 mb-2 font-medium\" htmlFor=\"title\">Title</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"title\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            className=\"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-800 dark:text-gray-200 mb-2 font-medium\" htmlFor=\"body\">Body</label>\r\n          <textarea\r\n            id=\"body\"\r\n            rows=\"10\"\r\n            value={body}\r\n            onChange={(e) => setBody(e.target.value)}\r\n            className=\"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\r\n          />\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2.5 rounded-lg shadow-lg shadow-blue-500/30 dark:shadow-blue-400/20 hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105\"\r\n        >\r\n          Publish Post\r\n        </button>\r\n      </form>\r\n    </ContentFormWrapper>\r\n  );\r\n};\r\n\r\nconst EditPostPage = () => {\r\n  const [title, setTitle] = useState('');\r\n  const [body, setBody] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const navigate = useNavigate();\r\n  const { id } = useParams();\r\n\r\n  useEffect(() => {\r\n    const fetchPost = async () => {\r\n      try {\r\n        const { data } = await apiClient.get(`/content/${id}`);\r\n        setTitle(data.title);\r\n        setBody(data.body);\r\n        setLoading(false);\r\n      } catch (err) {\r\n        setError('Failed to fetch post data. You may not have permission to edit this.');\r\n        console.error(err);\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchPost();\r\n  }, [id]);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    if (!title || !body) {\r\n      setError('Title and body are required.');\r\n      return;\r\n    }\r\n    try {\r\n      await apiClient.put(`/content/${id}`, { title, body });\r\n      navigate('/');\r\n    } catch (err) {\r\n      setError(err.response?.data?.message || 'Failed to update post.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  if (loading) {\r\n    return <div className=\"text-center text-gray-800 dark:text-gray-400\">Loading post...</div>;\r\n  }\r\n  \r\n  if (error && !title) {\r\n     return <p className=\"text-red-500 text-center\">{error}</p>;\r\n  }\r\n\r\n  return (\r\n    <ContentFormWrapper title=\"Edit Post\">\r\n      <form onSubmit={handleSubmit}>\r\n        {error && <p className=\"text-red-500 text-center mb-4 text-sm\">{error}</p>}\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-gray-800 dark:text-gray-200 mb-2 font-medium\" htmlFor=\"title\">Title</label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"title\"\r\n            value={title}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n            className=\"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-800 dark:text-gray-200 mb-2 font-medium\" htmlFor=\"body\">Body</label>\r\n          <textarea\r\n            id=\"body\"\r\n            rows=\"10\"\r\n            value={body}\r\n            onChange={(e) => setBody(e.target.value)}\r\n            className=\"w-full px-4 py-2.5 bg-gray-50 dark:bg-black/20 border border-gray-300 dark:border-white/10 rounded-lg text-gray-900 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-300 transition-all\"\r\n          />\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white px-4 py-2.5 rounded-lg shadow-lg shadow-blue-500/30 dark:shadow-blue-400/20 hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105\"\r\n        >\r\n          Update Post\r\n        </button>\r\n      </form>\r\n    </ContentFormWrapper>\r\n  );\r\n};\r\n\r\nconst UnauthorizedPage = () => {\r\n  return (\r\n    <div className=\"text-center p-10 bg-white dark:bg-black/10 rounded-2xl shadow-2xl max-w-lg mx-auto border border-gray-200 dark:border-white/10 dark:backdrop-blur-lg\">\r\n      <h1 className=\"text-5xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-red-500 to-yellow-500 dark:from-red-400 dark:to-yellow-400\">Access Denied</h1>\r\n      <p className=\"mt-6 text-xl text-gray-800 dark:text-gray-300\">You do not have the required permissions to view this page.</p>\r\n      <Link to=\"/\" className=\"mt-8 inline-block bg-gradient-to-r from-blue-500 to-blue-600 text-white px-6 py-3 rounded-lg shadow-md hover:from-blue-600 hover:to-blue-700 transition-all duration-300 transform hover:scale-105\">\r\n        Go Back to Home\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ProtectedRoute = ({ allowedRoles }) => {\r\n  const { user } = useAuth();\r\n  const location = useLocation();\r\n  const { userRole } = usePermissions();\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (allowedRoles && !allowedRoles.includes(userRole)) {\r\n    return <Navigate to=\"/unauthorized\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  return <Outlet />;\r\n};\r\n\r\nexport default function App() {\r\n  return (\r\n    <ThemeProvider>\r\n      <GlobalStyles />\r\n      <AuthProvider>\r\n        <BrowserRouter>\r\n          <Routes>\r\n            <Route path=\"/\" element={<Layout />}>\r\n              \r\n              <Route path=\"/login\" element={<LoginPage />} />\r\n              <Route path=\"/register\" element={<RegisterPage />} />\r\n              <Route path=\"/unauthorized\" element={<UnauthorizedPage />} />\r\n              \r\n              <Route element={<ProtectedRoute />}>\r\n                <Route index element={<HomePage />} />\r\n              </Route>\r\n              \r\n              <Route element={<ProtectedRoute allowedRoles={[ROLES.Admin, ROLES.Editor]} />}>\r\n                <Route path=\"create\" element={<CreatePostPage />} />\r\n                <Route path=\"edit/:id\" element={<EditPostPage />} />\r\n              </Route>\r\n              \r\n              <Route element={<ProtectedRoute allowedRoles={[ROLES.Admin]} />}>\r\n                <Route path=\"admin\" element={<Navigate to=\"/admin/users\" replace />} />\r\n                <Route path=\"admin/users\" element={<AdminPage />} />\r\n                <Route path=\"admin/audit\" element={<AuditLogPage />} />\r\n              </Route>\r\n\r\n            </Route>\r\n          </Routes>\r\n        </BrowserRouter>\r\n      </AuthProvider>\r\n    </ThemeProvider>\r\n  );\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}