{"ast":null,"code":"var _jsxFileName = \"C:\\\\codes\\\\Project FSD\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$(),\n  _s5 = $RefreshSig$(),\n  _s6 = $RefreshSig$(),\n  _s7 = $RefreshSig$(),\n  _s8 = $RefreshSig$(),\n  _s9 = $RefreshSig$();\nimport React, { useState, useEffect, createContext, useContext } from 'react';\nimport { BrowserRouter, Routes, Route, Link, useNavigate, Outlet, useLocation } from 'react-router-dom';\nimport axios from 'axios';\n\n// --- Configuration ---\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst API_BASE_URL = 'http://localhost:5001/api';\nconst ROLES = {\n  Admin: 'Admin',\n  Editor: 'Editor',\n  Viewer: 'Viewer'\n};\n\n// --- API Client (Axios) ---\nconst apiClient = axios.create({\n  baseURL: API_BASE_URL,\n  withCredentials: true // Send cookies\n});\n\n// Axios interceptor to add the JWT access token to requests\napiClient.interceptors.request.use(config => {\n  const token = localStorage.getItem('accessToken');\n  if (token) {\n    config.headers['Authorization'] = `Bearer ${token}`;\n  }\n  return config;\n}, error => {\n  return Promise.reject(error);\n});\n\n// Interceptor to handle token refresh\napiClient.interceptors.response.use(response => response, async error => {\n  const originalRequest = error.config;\n  if (error.response.status === 401 && !originalRequest._retry) {\n    originalRequest._retry = true;\n    try {\n      const {\n        data\n      } = await axios.post(`${API_BASE_URL}/auth/refresh`, {}, {\n        withCredentials: true\n      });\n      localStorage.setItem('accessToken', data.accessToken);\n      apiClient.defaults.headers.common['Authorization'] = `Bearer ${data.accessToken}`;\n      return apiClient(originalRequest);\n    } catch (refreshError) {\n      console.error(\"Token refresh failed\", refreshError);\n      // If refresh fails, clear auth and redirect to login\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('user');\n      window.location.href = '/login'; // Force redirect\n      return Promise.reject(refreshError);\n    }\n  }\n  return Promise.reject(error);\n});\n\n// --- Auth Context ---\nconst AuthContext = /*#__PURE__*/createContext(null);\nconst AuthProvider = ({\n  children\n}) => {\n  _s();\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')));\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    // Check if user and token are in localStorage\n    const token = localStorage.getItem('accessToken');\n    const storedUser = localStorage.getItem('user');\n    if (token && storedUser) {\n      setUser(JSON.parse(storedUser));\n    }\n    setLoading(false);\n  }, []);\n  const login = async (username, password) => {\n    const {\n      data\n    } = await apiClient.post('/auth/login', {\n      username,\n      password\n    });\n    localStorage.setItem('accessToken', data.accessToken);\n    localStorage.setItem('user', JSON.stringify(data.user));\n    setUser(data.user);\n    return data.user;\n  };\n  const logout = async () => {\n    try {\n      await apiClient.post('/auth/logout');\n    } catch (error) {\n      console.error(\"Logout failed\", error);\n    } finally {\n      localStorage.removeItem('accessToken');\n      localStorage.removeItem('user');\n      setUser(null);\n    }\n  };\n  const authContextValue = {\n    user,\n    login,\n    logout,\n    loading\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-center min-h-screen\",\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: authContextValue,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n_s(AuthProvider, \"wMb4DYrRwW9Byc8SCAK92u0gS1g=\");\n_c = AuthProvider;\nconst useAuth = () => {\n  _s2();\n  return useContext(AuthContext);\n};\n\n// --- Permission Hook ---\n// This hook provides a simple way to check permissions\n_s2(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nconst usePermissions = () => {\n  _s3();\n  const {\n    user\n  } = useAuth();\n  const can = (action, subject) => {\n    if (!user) return false;\n\n    // Admin can do everything\n    if (user.role === ROLES.Admin) return true;\n\n    // Check against resource and action\n    switch (action) {\n      case 'read':\n        return [ROLES.Admin, ROLES.Editor, ROLES.Viewer].includes(user.role);\n      case 'create':\n        return [ROLES.Admin, ROLES.Editor].includes(user.role);\n      case 'update':\n        // For component-level check, we need the subject (the content item)\n        if (subject && subject.author === user.id && user.role === ROLES.Editor) {\n          return true;\n        }\n        return false;\n      // Only Admin (handled above) or owner Editor can update\n      case 'delete':\n        if (subject && subject.author === user.id && user.role === ROLES.Editor) {\n          return true;\n        }\n        return false;\n      case 'manageUsers':\n        return user.role === ROLES.Admin;\n      default:\n        return false;\n    }\n  };\n  return {\n    can,\n    userRole: user === null || user === void 0 ? void 0 : user.role,\n    userId: user === null || user === void 0 ? void 0 : user.id\n  };\n};\n\n// --- UI Components ---\n\n// Layout Component\n_s3(usePermissions, \"9ep4vdl3mBfipxjmc+tQCDhw6Ik=\", false, function () {\n  return [useAuth];\n});\nconst Layout = () => {\n  _s4();\n  const {\n    user,\n    logout\n  } = useAuth();\n  const {\n    can\n  } = usePermissions();\n  const navigate = useNavigate();\n  const handleLogout = async () => {\n    await logout();\n    navigate('/login');\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-100 font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(\"nav\", {\n      className: \"bg-white shadow-md\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mx-auto px-6 py-4 flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/\",\n          className: \"text-2xl font-bold text-gray-800\",\n          children: \"RBAC Content\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-4 items-center\",\n          children: [/*#__PURE__*/_jsxDEV(Link, {\n            to: \"/\",\n            className: \"text-gray-600 hover:text-blue-500\",\n            children: \"Home\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), can('manageUsers') && /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/admin\",\n            className: \"text-gray-600 hover:text-blue-500\",\n            children: \"Admin Panel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 15\n          }, this), user ? /*#__PURE__*/_jsxDEV(_Fragment, {\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-gray-700\",\n              children: [\"Hi, \", user.username, \" (\", user.role, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: handleLogout,\n              className: \"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition\",\n              children: \"Logout\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true) : /*#__PURE__*/_jsxDEV(Link, {\n            to: \"/login\",\n            className: \"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\",\n            children: \"Login\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"container mx-auto px-6 py-8\",\n      children: /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n};\n\n// Protected Route Component\n_s4(Layout, \"Lyrjn06LOSYRM3H3SwHSOOjCnNU=\", false, function () {\n  return [useAuth, usePermissions, useNavigate];\n});\n_c2 = Layout;\nconst ProtectedRoute = ({\n  allowedRoles\n}) => {\n  _s5();\n  const {\n    user\n  } = useAuth();\n  const location = useLocation();\n  if (!user) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/login\",\n      state: {\n        from: location\n      },\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 12\n    }, this);\n  }\n  if (allowedRoles && !allowedRoles.includes(user.role)) {\n    return /*#__PURE__*/_jsxDEV(Navigate, {\n      to: \"/unauthorized\",\n      replace: true\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 10\n  }, this);\n};\n\n// --- Pages ---\n\n// Login Page\n_s5(ProtectedRoute, \"cTflZxqU4RCGHztF80S0D55o9CQ=\", false, function () {\n  return [useAuth, useLocation];\n});\n_c3 = ProtectedRoute;\nconst LoginPage = () => {\n  _s6();\n  var _location$state, _location$state$from;\n  const [username, setUsername] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState(null);\n  const {\n    login\n  } = useAuth();\n  const navigate = useNavigate();\n  const location = useLocation();\n  const from = ((_location$state = location.state) === null || _location$state === void 0 ? void 0 : (_location$state$from = _location$state.from) === null || _location$state$from === void 0 ? void 0 : _location$state$from.pathname) || '/';\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setError(null);\n    try {\n      await login(username, password);\n      navigate(from, {\n        replace: true\n      });\n    } catch (err) {\n      setError('Login failed. Please check your credentials.');\n      console.error(err);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-md mx-auto bg-white p-8 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"text-3xl font-bold text-center mb-6\",\n      children: \"Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 249,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [error && /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-red-500 text-center mb-4\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 19\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 mb-2\",\n          children: \"Username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 253,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: username,\n          onChange: e => setUsername(e.target.value),\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"block text-gray-700 mb-2\",\n          children: \"Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          value: password,\n          onChange: e => setPassword(e.target.value),\n          className: \"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 261,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"w-full bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\",\n        children: \"Login\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 270,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-4 text-sm text-gray-600\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Demo Users:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 278,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-disc list-inside\",\n        children: [/*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"admin / adminpassword\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 280,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"editor / editorpassword\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n          children: \"viewer / viewerpassword\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 277,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 5\n  }, this);\n};\n\n// Home Page (Content List)\n_s6(LoginPage, \"7EMwd+8gsTDfLWvBFfs+kBopM74=\", false, function () {\n  return [useAuth, useNavigate, useLocation];\n});\n_c4 = LoginPage;\nconst HomePage = () => {\n  _s7();\n  const [content, setContent] = useState([]);\n  const [error, setError] = useState(null);\n  const {\n    can\n  } = usePermissions();\n  const {\n    user\n  } = useAuth();\n  const fetchContent = async () => {\n    try {\n      const {\n        data\n      } = await apiClient.get('/content');\n      setContent(data);\n    } catch (err) {\n      setError('Failed to fetch content.');\n      console.error(err);\n    }\n  };\n  useEffect(() => {\n    fetchContent();\n  }, []);\n  const handleDelete = async id => {\n    if (window.confirm('Are you sure you want to delete this post?')) {\n      try {\n        await apiClient.delete(`/content/${id}`);\n        fetchContent(); // Re-fetch content\n      } catch (err) {\n        alert('Error: You may not have permission to delete this.');\n        console.error(err);\n      }\n    }\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 323,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-4xl font-bold mb-6\",\n      children: \"Content Feed\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 328,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: content.map(item => /*#__PURE__*/_jsxDEV(ContentItem, {\n        item: item,\n        onDelete: handleDelete\n      }, item._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 331,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 329,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 327,\n    columnNumber: 5\n  }, this);\n};\n\n// Content Item (Demonstrates component-level gates)\n_s7(HomePage, \"dESYbI8pNb+U+uxs1RI9JX8lPRw=\", false, function () {\n  return [usePermissions, useAuth];\n});\n_c5 = HomePage;\nconst ContentItem = ({\n  item,\n  onDelete\n}) => {\n  _s8();\n  const {\n    can,\n    userId,\n    userRole\n  } = usePermissions();\n\n  // Construct a subject for the permission check\n  const subject = {\n    author: item.author._id\n  };\n  const canUpdate = can('update', subject);\n  const canDelete = can('delete', subject);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white p-6 rounded-lg shadow-md relative\",\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      className: \"text-2xl font-bold mb-2\",\n      children: item.title\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 354,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-500 text-sm mb-4\",\n      children: [\"By \", item.author.username]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-gray-700\",\n      children: item.body\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 356,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute top-4 right-4 flex space-x-2\",\n      children: [canUpdate && /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"text-sm bg-yellow-400 text-white px-3 py-1 rounded-lg hover:bg-yellow-500\",\n        title: canUpdate ? \"Edit this post\" : \"You cannot edit this post\",\n        children: \"Edit\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this), canDelete && /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onDelete(item._id),\n        className: \"text-sm bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600\",\n        title: canDelete ? \"Delete this post\" : \"You cannot delete this post\",\n        children: \"Delete\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 368,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 359,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 353,\n    columnNumber: 5\n  }, this);\n};\n\n// Admin Page\n_s8(ContentItem, \"HvOVGNj1GHgTxqyY0BS3uyu89TI=\", false, function () {\n  return [usePermissions];\n});\n_c6 = ContentItem;\nconst AdminPage = () => {\n  _s9();\n  const [users, setUsers] = useState([]);\n  const [error, setError] = useState(null);\n  useEffect(() => {\n    const fetchUsers = async () => {\n      try {\n        const {\n          data\n        } = await apiClient.get('/users');\n        setUsers(data);\n      } catch (err) {\n        setError('Failed to fetch users.');\n        console.error(err);\n      }\n    };\n    fetchUsers();\n  }, []);\n  const handleRoleChange = async (userId, newRole) => {\n    try {\n      await apiClient.put(`/users/${userId}/role`, {\n        role: newRole\n      });\n      setUsers(users.map(u => u._id === userId ? {\n        ...u,\n        role: newRole\n      } : u));\n    } catch (err) {\n      alert('Failed to update role.');\n    }\n  };\n  if (error) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-red-500\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-md\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-4xl font-bold mb-6\",\n      children: \"Admin Panel - User Management\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 415,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n      className: \"w-full border-collapse\",\n      children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n        children: /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"bg-gray-200\",\n          children: [/*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"border p-3 text-left\",\n            children: \"Username\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 419,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"border p-3 text-left\",\n            children: \"User ID\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"border p-3 text-left\",\n            children: \"Role\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n            className: \"border p-3 text-left\",\n            children: \"Actions\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 422,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 418,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 417,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n        children: users.map(user => /*#__PURE__*/_jsxDEV(\"tr\", {\n          className: \"hover:bg-gray-50\",\n          children: [/*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"border p-3\",\n            children: user.username\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 428,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"border p-3\",\n            children: user._id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"border p-3\",\n            children: user.role\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 430,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n            className: \"border p-3\",\n            children: /*#__PURE__*/_jsxDEV(\"select\", {\n              value: user.role,\n              onChange: e => handleRoleChange(user._id, e.target.value),\n              className: \"p-2 border rounded-lg\",\n              children: Object.values(ROLES).map(role => /*#__PURE__*/_jsxDEV(\"option\", {\n                value: role,\n                children: role\n              }, role, false, {\n                fileName: _jsxFileName,\n                lineNumber: 438,\n                columnNumber: 21\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 432,\n              columnNumber: 17\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 431,\n            columnNumber: 15\n          }, this)]\n        }, user._id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 427,\n          columnNumber: 13\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 425,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 416,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 414,\n    columnNumber: 5\n  }, this);\n};\n\n// Unauthorized Page\n_s9(AdminPage, \"W8dPUmt9Ai9400zDPm7RH8jUmB4=\");\n_c7 = AdminPage;\nconst UnauthorizedPage = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-4xl font-bold text-red-600 mb-4\",\n      children: \"403 - Forbidden\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 454,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xl text-gray-700 mb-6\",\n      children: \"You do not have permission to access this page.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 455,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      className: \"text-blue-500 hover:underline\",\n      children: \"Go back to Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 456,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 453,\n    columnNumber: 5\n  }, this);\n};\n\n// Not Found Page\n_c8 = UnauthorizedPage;\nconst NotFoundPage = () => {\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"text-center\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      className: \"text-4xl font-bold text-gray-800 mb-4\",\n      children: \"404 - Not Found\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 465,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"text-xl text-gray-700 mb-6\",\n      children: \"The page you are looking for does not exist.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 466,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      className: \"text-blue-500 hover:underline\",\n      children: \"Go back to Home\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 464,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Main App Component ---\n_c9 = NotFoundPage;\nexport default function App() {\n  return /*#__PURE__*/_jsxDEV(AuthProvider, {\n    children: /*#__PURE__*/_jsxDEV(BrowserRouter, {\n      children: /*#__PURE__*/_jsxDEV(Routes, {\n        children: /*#__PURE__*/_jsxDEV(Route, {\n          path: \"/\",\n          element: /*#__PURE__*/_jsxDEV(Layout, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 478,\n            columnNumber: 36\n          }, this),\n          children: [/*#__PURE__*/_jsxDEV(Route, {\n            path: \"/login\",\n            element: /*#__PURE__*/_jsxDEV(LoginPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 480,\n              columnNumber: 43\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 480,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 483,\n              columnNumber: 29\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Route, {\n              index: true,\n              element: /*#__PURE__*/_jsxDEV(HomePage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 484,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 484,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 483,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            element: /*#__PURE__*/_jsxDEV(ProtectedRoute, {\n              allowedRoles: [ROLES.Admin]\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 488,\n              columnNumber: 29\n            }, this),\n            children: /*#__PURE__*/_jsxDEV(Route, {\n              path: \"admin\",\n              element: /*#__PURE__*/_jsxDEV(AdminPage, {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 489,\n                columnNumber: 44\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 489,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"/unauthorized\",\n            element: /*#__PURE__*/_jsxDEV(UnauthorizedPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 493,\n              columnNumber: 50\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 493,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Route, {\n            path: \"*\",\n            element: /*#__PURE__*/_jsxDEV(NotFoundPage, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 494,\n              columnNumber: 38\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 494,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 477,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 476,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 475,\n    columnNumber: 5\n  }, this);\n}\n_c0 = App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9, _c0;\n$RefreshReg$(_c, \"AuthProvider\");\n$RefreshReg$(_c2, \"Layout\");\n$RefreshReg$(_c3, \"ProtectedRoute\");\n$RefreshReg$(_c4, \"LoginPage\");\n$RefreshReg$(_c5, \"HomePage\");\n$RefreshReg$(_c6, \"ContentItem\");\n$RefreshReg$(_c7, \"AdminPage\");\n$RefreshReg$(_c8, \"UnauthorizedPage\");\n$RefreshReg$(_c9, \"NotFoundPage\");\n$RefreshReg$(_c0, \"App\");","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","BrowserRouter","Routes","Route","Link","useNavigate","Outlet","useLocation","axios","jsxDEV","_jsxDEV","Fragment","_Fragment","API_BASE_URL","ROLES","Admin","Editor","Viewer","apiClient","create","baseURL","withCredentials","interceptors","request","use","config","token","localStorage","getItem","headers","error","Promise","reject","response","originalRequest","status","_retry","data","post","setItem","accessToken","defaults","common","refreshError","console","removeItem","window","location","href","AuthContext","AuthProvider","children","_s","user","setUser","JSON","parse","loading","setLoading","storedUser","login","username","password","stringify","logout","authContextValue","className","fileName","_jsxFileName","lineNumber","columnNumber","Provider","value","_c","useAuth","_s2","usePermissions","_s3","can","action","subject","role","includes","author","id","userRole","userId","Layout","_s4","navigate","handleLogout","to","onClick","_c2","ProtectedRoute","allowedRoles","_s5","Navigate","state","from","replace","_c3","LoginPage","_s6","_location$state","_location$state$from","setUsername","setPassword","setError","pathname","handleSubmit","e","preventDefault","err","onSubmit","type","onChange","target","_c4","HomePage","_s7","content","setContent","fetchContent","get","handleDelete","confirm","delete","alert","map","item","ContentItem","onDelete","_id","_c5","_s8","canUpdate","canDelete","title","body","_c6","AdminPage","_s9","users","setUsers","fetchUsers","handleRoleChange","newRole","put","u","Object","values","_c7","UnauthorizedPage","_c8","NotFoundPage","_c9","App","path","element","index","_c0","$RefreshReg$"],"sources":["C:/codes/Project FSD/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext } from 'react';\r\nimport {\r\n  BrowserRouter,\r\n  Routes,\r\n  Route,\r\n  Link,\r\n  useNavigate,\r\n  Outlet,\r\n  useLocation,\r\n} from 'react-router-dom';\r\nimport axios from 'axios';\r\n\r\n// --- Configuration ---\r\nconst API_BASE_URL = 'http://localhost:5001/api';\r\n\r\nconst ROLES = {\r\n  Admin: 'Admin',\r\n  Editor: 'Editor',\r\n  Viewer: 'Viewer',\r\n};\r\n\r\n// --- API Client (Axios) ---\r\nconst apiClient = axios.create({\r\n  baseURL: API_BASE_URL,\r\n  withCredentials: true, // Send cookies\r\n});\r\n\r\n// Axios interceptor to add the JWT access token to requests\r\napiClient.interceptors.request.use((config) => {\r\n  const token = localStorage.getItem('accessToken');\r\n  if (token) {\r\n    config.headers['Authorization'] = `Bearer ${token}`;\r\n  }\r\n  return config;\r\n}, (error) => {\r\n  return Promise.reject(error);\r\n});\r\n\r\n// Interceptor to handle token refresh\r\napiClient.interceptors.response.use(\r\n  (response) => response,\r\n  async (error) => {\r\n    const originalRequest = error.config;\r\n    if (error.response.status === 401 && !originalRequest._retry) {\r\n      originalRequest._retry = true;\r\n      try {\r\n        const { data } = await axios.post(`${API_BASE_URL}/auth/refresh`, {}, { withCredentials: true });\r\n        localStorage.setItem('accessToken', data.accessToken);\r\n        apiClient.defaults.headers.common['Authorization'] = `Bearer ${data.accessToken}`;\r\n        return apiClient(originalRequest);\r\n      } catch (refreshError) {\r\n        console.error(\"Token refresh failed\", refreshError);\r\n        // If refresh fails, clear auth and redirect to login\r\n        localStorage.removeItem('accessToken');\r\n        localStorage.removeItem('user');\r\n        window.location.href = '/login'; // Force redirect\r\n        return Promise.reject(refreshError);\r\n      }\r\n    }\r\n    return Promise.reject(error);\r\n  }\r\n);\r\n\r\n\r\n// --- Auth Context ---\r\nconst AuthContext = createContext(null);\r\n\r\nconst AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('user')));\r\n  const [loading, setLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Check if user and token are in localStorage\r\n    const token = localStorage.getItem('accessToken');\r\n    const storedUser = localStorage.getItem('user');\r\n\r\n    if (token && storedUser) {\r\n      setUser(JSON.parse(storedUser));\r\n    }\r\n    setLoading(false);\r\n  }, []);\r\n\r\n  const login = async (username, password) => {\r\n    const { data } = await apiClient.post('/auth/login', { username, password });\r\n    localStorage.setItem('accessToken', data.accessToken);\r\n    localStorage.setItem('user', JSON.stringify(data.user));\r\n    setUser(data.user);\r\n    return data.user;\r\n  };\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await apiClient.post('/auth/logout');\r\n    } catch (error) {\r\n      console.error(\"Logout failed\", error);\r\n    } finally {\r\n      localStorage.removeItem('accessToken');\r\n      localStorage.removeItem('user');\r\n      setUser(null);\r\n    }\r\n  };\r\n\r\n  const authContextValue = { user, login, logout, loading };\r\n\r\n  if (loading) {\r\n    return <div className=\"flex items-center justify-center min-h-screen\">Loading...</div>;\r\n  }\r\n\r\n  return (\r\n    <AuthContext.Provider value={authContextValue}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nconst useAuth = () => {\r\n  return useContext(AuthContext);\r\n};\r\n\r\n// --- Permission Hook ---\r\n// This hook provides a simple way to check permissions\r\nconst usePermissions = () => {\r\n  const { user } = useAuth();\r\n\r\n  const can = (action, subject) => {\r\n    if (!user) return false;\r\n\r\n    // Admin can do everything\r\n    if (user.role === ROLES.Admin) return true;\r\n\r\n    // Check against resource and action\r\n    switch (action) {\r\n      case 'read':\r\n        return [ROLES.Admin, ROLES.Editor, ROLES.Viewer].includes(user.role);\r\n      case 'create':\r\n        return [ROLES.Admin, ROLES.Editor].includes(user.role);\r\n      case 'update':\r\n        // For component-level check, we need the subject (the content item)\r\n        if (subject && subject.author === user.id && user.role === ROLES.Editor) {\r\n          return true;\r\n        }\r\n        return false; // Only Admin (handled above) or owner Editor can update\r\n      case 'delete':\r\n        if (subject && subject.author === user.id && user.role === ROLES.Editor) {\r\n          return true;\r\n        }\r\n        return false;\r\n      case 'manageUsers':\r\n        return user.role === ROLES.Admin;\r\n      default:\r\n        return false;\r\n    }\r\n  };\r\n\r\n  return { can, userRole: user?.role, userId: user?.id };\r\n};\r\n\r\n\r\n// --- UI Components ---\r\n\r\n// Layout Component\r\nconst Layout = () => {\r\n  const { user, logout } = useAuth();\r\n  const { can } = usePermissions();\r\n  const navigate = useNavigate();\r\n\r\n  const handleLogout = async () => {\r\n    await logout();\r\n    navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-100 font-sans\">\r\n      <nav className=\"bg-white shadow-md\">\r\n        <div className=\"container mx-auto px-6 py-4 flex justify-between items-center\">\r\n          <Link to=\"/\" className=\"text-2xl font-bold text-gray-800\">RBAC Content</Link>\r\n          <div className=\"flex space-x-4 items-center\">\r\n            <Link to=\"/\" className=\"text-gray-600 hover:text-blue-500\">Home</Link>\r\n            {can('manageUsers') && (\r\n              <Link to=\"/admin\" className=\"text-gray-600 hover:text-blue-500\">Admin Panel</Link>\r\n            )}\r\n            {user ? (\r\n              <>\r\n                <span className=\"text-gray-700\">Hi, {user.username} ({user.role})</span>\r\n                <button\r\n                  onClick={handleLogout}\r\n                  className=\"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition\"\r\n                >\r\n                  Logout\r\n                </button>\r\n              </>\r\n            ) : (\r\n              <Link to=\"/login\" className=\"bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\">\r\n                Login\r\n              </Link>\r\n            )}\r\n          </div>\r\n        </div>\r\n      </nav>\r\n      <main className=\"container mx-auto px-6 py-8\">\r\n        <Outlet />\r\n      </main>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Protected Route Component\r\nconst ProtectedRoute = ({ allowedRoles }) => {\r\n  const { user } = useAuth();\r\n  const location = useLocation();\r\n\r\n  if (!user) {\r\n    return <Navigate to=\"/login\" state={{ from: location }} replace />;\r\n  }\r\n\r\n  if (allowedRoles && !allowedRoles.includes(user.role)) {\r\n    return <Navigate to=\"/unauthorized\" replace />;\r\n  }\r\n\r\n  return <Outlet />;\r\n};\r\n\r\n// --- Pages ---\r\n\r\n// Login Page\r\nconst LoginPage = () => {\r\n  const [username, setUsername] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [error, setError] = useState(null);\r\n  const { login } = useAuth();\r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  const from = location.state?.from?.pathname || '/';\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setError(null);\r\n    try {\r\n      await login(username, password);\r\n      navigate(from, { replace: true });\r\n    } catch (err) {\r\n      setError('Login failed. Please check your credentials.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"max-w-md mx-auto bg-white p-8 rounded-lg shadow-md\">\r\n      <h2 className=\"text-3xl font-bold text-center mb-6\">Login</h2>\r\n      <form onSubmit={handleSubmit}>\r\n        {error && <p className=\"text-red-500 text-center mb-4\">{error}</p>}\r\n        <div className=\"mb-4\">\r\n          <label className=\"block text-gray-700 mb-2\">Username</label>\r\n          <input\r\n            type=\"text\"\r\n            value={username}\r\n            onChange={(e) => setUsername(e.target.value)}\r\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n        </div>\r\n        <div className=\"mb-6\">\r\n          <label className=\"block text-gray-700 mb-2\">Password</label>\r\n          <input\r\n            type=\"password\"\r\n            value={password}\r\n            onChange={(e) => setPassword(e.target.value)}\r\n            className=\"w-full px-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500\"\r\n          />\r\n        </div>\r\n        <button\r\n          type=\"submit\"\r\n          className=\"w-full bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition\"\r\n        >\r\n          Login\r\n        </button>\r\n      </form>\r\n      <div className=\"mt-4 text-sm text-gray-600\">\r\n        <p>Demo Users:</p>\r\n        <ul className=\"list-disc list-inside\">\r\n          <li>admin / adminpassword</li>\r\n          <li>editor / editorpassword</li>\r\n          <li>viewer / viewerpassword</li>\r\n        </ul>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Home Page (Content List)\r\nconst HomePage = () => {\r\n  const [content, setContent] = useState([]);\r\n  const [error, setError] = useState(null);\r\n  const { can } = usePermissions();\r\n  const { user } = useAuth();\r\n  \r\n  const fetchContent = async () => {\r\n    try {\r\n      const { data } = await apiClient.get('/content');\r\n      setContent(data);\r\n    } catch (err) {\r\n      setError('Failed to fetch content.');\r\n      console.error(err);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchContent();\r\n  }, []);\r\n\r\n  const handleDelete = async (id) => {\r\n    if (window.confirm('Are you sure you want to delete this post?')) {\r\n      try {\r\n        await apiClient.delete(`/content/${id}`);\r\n        fetchContent(); // Re-fetch content\r\n      } catch (err) {\r\n        alert('Error: You may not have permission to delete this.');\r\n        console.error(err);\r\n      }\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return <p className=\"text-red-500\">{error}</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto\">\r\n      <h1 className=\"text-4xl font-bold mb-6\">Content Feed</h1>\r\n      <div className=\"space-y-6\">\r\n        {content.map((item) => (\r\n          <ContentItem\r\n            key={item._id}\r\n            item={item}\r\n            onDelete={handleDelete}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Content Item (Demonstrates component-level gates)\r\nconst ContentItem = ({ item, onDelete }) => {\r\n  const { can, userId, userRole } = usePermissions();\r\n  \r\n  // Construct a subject for the permission check\r\n  const subject = { author: item.author._id };\r\n  \r\n  const canUpdate = can('update', subject);\r\n  const canDelete = can('delete', subject);\r\n\r\n  return (\r\n    <div className=\"bg-white p-6 rounded-lg shadow-md relative\">\r\n      <h3 className=\"text-2xl font-bold mb-2\">{item.title}</h3>\r\n      <p className=\"text-gray-500 text-sm mb-4\">By {item.author.username}</p>\r\n      <p className=\"text-gray-700\">{item.body}</p>\r\n      \r\n      {/* UI Guarding: Show buttons based on permissions */}\r\n      <div className=\"absolute top-4 right-4 flex space-x-2\">\r\n        {canUpdate && (\r\n          <button className=\"text-sm bg-yellow-400 text-white px-3 py-1 rounded-lg hover:bg-yellow-500\"\r\n            title={canUpdate ? \"Edit this post\" : \"You cannot edit this post\"}\r\n          >\r\n            Edit\r\n          </button>\r\n        )}\r\n        {canDelete && (\r\n          <button \r\n            onClick={() => onDelete(item._id)}\r\n            className=\"text-sm bg-red-500 text-white px-3 py-1 rounded-lg hover:bg-red-600\"\r\n            title={canDelete ? \"Delete this post\" : \"You cannot delete this post\"}\r\n          >\r\n            Delete\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n\r\n// Admin Page\r\nconst AdminPage = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchUsers = async () => {\r\n      try {\r\n        const { data } = await apiClient.get('/users');\r\n        setUsers(data);\r\n      } catch (err) {\r\n        setError('Failed to fetch users.');\r\n        console.error(err);\r\n      }\r\n    };\r\n    fetchUsers();\r\n  }, []);\r\n\r\n  const handleRoleChange = async (userId, newRole) => {\r\n    try {\r\n      await apiClient.put(`/users/${userId}/role`, { role: newRole });\r\n      setUsers(users.map(u => u._id === userId ? { ...u, role: newRole } : u));\r\n    } catch (err) {\r\n      alert('Failed to update role.');\r\n    }\r\n  };\r\n\r\n  if (error) {\r\n    return <p className=\"text-red-500\">{error}</p>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"max-w-4xl mx-auto bg-white p-8 rounded-lg shadow-md\">\r\n      <h1 className=\"text-4xl font-bold mb-6\">Admin Panel - User Management</h1>\r\n      <table className=\"w-full border-collapse\">\r\n        <thead>\r\n          <tr className=\"bg-gray-200\">\r\n            <th className=\"border p-3 text-left\">Username</th>\r\n            <th className=\"border p-3 text-left\">User ID</th>\r\n            <th className=\"border p-3 text-left\">Role</th>\r\n            <th className=\"border p-3 text-left\">Actions</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {users.map((user) => (\r\n            <tr key={user._id} className=\"hover:bg-gray-50\">\r\n              <td className=\"border p-3\">{user.username}</td>\r\n              <td className=\"border p-3\">{user._id}</td>\r\n              <td className=\"border p-3\">{user.role}</td>\r\n              <td className=\"border p-3\">\r\n                <select\r\n                  value={user.role}\r\n                  onChange={(e) => handleRoleChange(user._id, e.target.value)}\r\n                  className=\"p-2 border rounded-lg\"\r\n                >\r\n                  {Object.values(ROLES).map(role => (\r\n                    <option key={role} value={role}>{role}</option>\r\n                  ))}\r\n                </select>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Unauthorized Page\r\nconst UnauthorizedPage = () => {\r\n  return (\r\n    <div className=\"text-center\">\r\n      <h1 className=\"text-4xl font-bold text-red-600 mb-4\">403 - Forbidden</h1>\r\n      <p className=\"text-xl text-gray-700 mb-6\">You do not have permission to access this page.</p>\r\n      <Link to=\"/\" className=\"text-blue-500 hover:underline\">Go back to Home</Link>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Not Found Page\r\nconst NotFoundPage = () => {\r\n  return (\r\n    <div className=\"text-center\">\r\n      <h1 className=\"text-4xl font-bold text-gray-800 mb-4\">404 - Not Found</h1>\r\n      <p className=\"text-xl text-gray-700 mb-6\">The page you are looking for does not exist.</p>\r\n      <Link to=\"/\" className=\"text-blue-500 hover:underline\">Go back to Home</Link>\r\n    </div>\r\n  );\r\n};\r\n\r\n// --- Main App Component ---\r\nexport default function App() {\r\n  return (\r\n    <AuthProvider>\r\n      <BrowserRouter>\r\n        <Routes>\r\n          <Route path=\"/\" element={<Layout />}>\r\n            {/* Public Routes */}\r\n            <Route path=\"/login\" element={<LoginPage />} />\r\n            \r\n            {/* Protected Routes */}\r\n            <Route element={<ProtectedRoute />}>\r\n              <Route index element={<HomePage />} />\r\n            </Route>\r\n            \r\n            {/* Admin-Only Route */}\r\n            <Route element={<ProtectedRoute allowedRoles={[ROLES.Admin]} />}>\r\n              <Route path=\"admin\" element={<AdminPage />} />\r\n            </Route>\r\n\r\n            {/* Catch-all & Error Routes */}\r\n            <Route path=\"/unauthorized\" element={<UnauthorizedPage />} />\r\n            <Route path=\"*\" element={<NotFoundPage />} />\r\n          </Route>\r\n        </Routes>\r\n      </BrowserRouter>\r\n    </AuthProvider>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}